[
  structure_item (src/lr1partial.ml[14,1000+0]..[14,1000+12])
    Pstr_open Fresh
    module_expr (src/lr1partial.ml[14,1000+5]..[14,1000+12])
      Pmod_ident "Grammar" (src/lr1partial.ml[14,1000+5]..[14,1000+12])
  structure_item (src/lr1partial.ml[16,1014+0]..[16,1014+14])
    Pstr_exception
    type_exception
      ptyext_constructor =
        extension_constructor (src/lr1partial.ml[16,1014+0]..[16,1014+14])
          pext_name = "Oops"
          pext_kind =
            Pext_decl
              []
              None
  structure_item (src/lr1partial.ml[18,1030+0]..[235,8272+3])
    Pstr_module
    "Run" (src/lr1partial.ml[18,1030+7]..[18,1030+10])
      module_expr (src/lr1partial.ml[18,1030+11]..[235,8272+3])
        Pmod_functor "X" (src/lr1partial.ml[18,1030+12]..[18,1030+13])
        module_type (src/lr1partial.ml[18,1030+16]..[29,1236+3])
          Pmty_signature
          [
            signature_item (src/lr1partial.ml[22,1100+2]..[22,1100+27])
              Psig_value
              value_description "tokens" (src/lr1partial.ml[22,1100+6]..[22,1100+12]) (src/lr1partial.ml[22,1100+2]..[22,1100+27])
                core_type (src/lr1partial.ml[22,1100+14]..[22,1100+27])
                  Ptyp_constr "TerminalSet.t" (src/lr1partial.ml[22,1100+14]..[22,1100+27])
                  []
                []
            signature_item (src/lr1partial.ml[27,1214+2]..[27,1214+20])
              Psig_value
              value_description "goal" (src/lr1partial.ml[27,1214+6]..[27,1214+10]) (src/lr1partial.ml[27,1214+2]..[27,1214+20])
                core_type (src/lr1partial.ml[27,1214+12]..[27,1214+20])
                  Ptyp_constr "Lr1.node" (src/lr1partial.ml[27,1214+12]..[27,1214+20])
                  []
                []
          ]
        module_expr (src/lr1partial.ml[29,1236+7]..[235,8272+3])
          Pmod_structure
          [
            structure_item (src/lr1partial.ml[36,1520+2]..[48,1863+15])
              Pstr_value Nonrec
              [
                <def>
                  pattern (src/lr1partial.ml[36,1520+6]..[36,1520+14])
                    Ppat_var "relevant" (src/lr1partial.ml[36,1520+6]..[36,1520+14])
                  core_type (src/lr1partial.ml[36,1520+17]..[36,1520+33])
                    Ptyp_arrow
                    Nolabel
                    core_type (src/lr1partial.ml[36,1520+17]..[36,1520+25])
                      Ptyp_constr "Lr1.node" (src/lr1partial.ml[36,1520+17]..[36,1520+25])
                      []
                    core_type (src/lr1partial.ml[36,1520+29]..[36,1520+33])
                      Ptyp_constr "bool" (src/lr1partial.ml[36,1520+29]..[36,1520+33])
                      []
                  expression (src/lr1partial.ml[37,1556+4]..[48,1863+15])
                    Pexp_letmodule "G" (src/lr1partial.ml[37,1556+15]..[37,1556+16])
                    module_expr (src/lr1partial.ml[37,1556+19]..[41,1658+7])
                      Pmod_structure
                      [
                        structure_item (src/lr1partial.ml[38,1582+6]..[38,1582+31])
                          Pstr_include                          module_expr (src/lr1partial.ml[38,1582+14]..[38,1582+31])
                            Pmod_ident "Lr1.BackwardEdges" (src/lr1partial.ml[38,1582+14]..[38,1582+31])
                        structure_item (src/lr1partial.ml[39,1614+6]..[40,1641+16])
                          Pstr_value Nonrec
                          [
                            <def>
                              pattern (src/lr1partial.ml[39,1614+10]..[39,1614+22])
                                Ppat_var "foreach_root" (src/lr1partial.ml[39,1614+10]..[39,1614+22])
                              expression (src/lr1partial.ml[39,1614+23]..[40,1641+16]) ghost
                                Pexp_fun
                                Nolabel
                                None
                                pattern (src/lr1partial.ml[39,1614+23]..[39,1614+24])
                                  Ppat_var "f" (src/lr1partial.ml[39,1614+23]..[39,1614+24])
                                expression (src/lr1partial.ml[40,1641+8]..[40,1641+16])
                                  Pexp_apply
                                  expression (src/lr1partial.ml[40,1641+8]..[40,1641+9])
                                    Pexp_ident "f" (src/lr1partial.ml[40,1641+8]..[40,1641+9])
                                  [
                                    <arg>
                                    Nolabel
                                      expression (src/lr1partial.ml[40,1641+10]..[40,1641+16])
                                        Pexp_ident "X.goal" (src/lr1partial.ml[40,1641+10]..[40,1641+16])
                                  ]
                          ]
                      ]
                    expression (src/lr1partial.ml[42,1669+4]..[48,1863+15])
                      Pexp_letmodule "M" (src/lr1partial.ml[42,1669+15]..[42,1669+16])
                      module_expr (src/lr1partial.ml[42,1669+19]..[42,1669+37])
                        Pmod_apply
                        module_expr (src/lr1partial.ml[42,1669+19]..[42,1669+32])
                          Pmod_ident "DFS.MarkArray" (src/lr1partial.ml[42,1669+19]..[42,1669+32])
                        module_expr (src/lr1partial.ml[42,1669+33]..[42,1669+36])
                          Pmod_ident "Lr1" (src/lr1partial.ml[42,1669+33]..[42,1669+36])
                      expression (src/lr1partial.ml[43,1710+4]..[48,1863+15])
                        Pexp_letmodule "D" (src/lr1partial.ml[43,1710+15]..[43,1710+16])
                        module_expr (src/lr1partial.ml[43,1710+19]..[46,1813+7])
                          Pmod_structure
                          [
                            structure_item (src/lr1partial.ml[44,1736+6]..[44,1736+29])
                              Pstr_value Nonrec
                              [
                                <def>
                                  pattern (src/lr1partial.ml[44,1736+10]..[44,1736+18])
                                    Ppat_var "discover" (src/lr1partial.ml[44,1736+10]..[44,1736+18])
                                  expression (src/lr1partial.ml[44,1736+19]..[44,1736+29]) ghost
                                    Pexp_fun
                                    Nolabel
                                    None
                                    pattern (src/lr1partial.ml[44,1736+19]..[44,1736+24])
                                      Ppat_var "_node" (src/lr1partial.ml[44,1736+19]..[44,1736+24])
                                    expression (src/lr1partial.ml[44,1736+27]..[44,1736+29])
                                      Pexp_construct "()" (src/lr1partial.ml[44,1736+27]..[44,1736+29])
                                      None
                              ]
                            structure_item (src/lr1partial.ml[45,1766+6]..[45,1766+46])
                              Pstr_value Nonrec
                              [
                                <def>
                                  pattern (src/lr1partial.ml[45,1766+10]..[45,1766+18])
                                    Ppat_var "traverse" (src/lr1partial.ml[45,1766+10]..[45,1766+18])
                                  expression (src/lr1partial.ml[45,1766+19]..[45,1766+46]) ghost
                                    Pexp_fun
                                    Nolabel
                                    None
                                    pattern (src/lr1partial.ml[45,1766+19]..[45,1766+26])
                                      Ppat_var "_source" (src/lr1partial.ml[45,1766+19]..[45,1766+26])
                                    expression (src/lr1partial.ml[45,1766+27]..[45,1766+46]) ghost
                                      Pexp_fun
                                      Nolabel
                                      None
                                      pattern (src/lr1partial.ml[45,1766+27]..[45,1766+33])
                                        Ppat_var "_label" (src/lr1partial.ml[45,1766+27]..[45,1766+33])
                                      expression (src/lr1partial.ml[45,1766+34]..[45,1766+46]) ghost
                                        Pexp_fun
                                        Nolabel
                                        None
                                        pattern (src/lr1partial.ml[45,1766+34]..[45,1766+41])
                                          Ppat_var "_target" (src/lr1partial.ml[45,1766+34]..[45,1766+41])
                                        expression (src/lr1partial.ml[45,1766+44]..[45,1766+46])
                                          Pexp_construct "()" (src/lr1partial.ml[45,1766+44]..[45,1766+46])
                                          None
                              ]
                          ]
                        expression (src/lr1partial.ml[47,1824+4]..[48,1863+15])
                          Pexp_letmodule "R" (src/lr1partial.ml[47,1824+15]..[47,1824+16])
                          module_expr (src/lr1partial.ml[47,1824+19]..[47,1824+35])
                            Pmod_apply
                            module_expr (src/lr1partial.ml[47,1824+19]..[47,1824+32])
                              Pmod_apply
                              module_expr (src/lr1partial.ml[47,1824+19]..[47,1824+29])
                                Pmod_apply
                                module_expr (src/lr1partial.ml[47,1824+19]..[47,1824+26])
                                  Pmod_ident "DFS.Run" (src/lr1partial.ml[47,1824+19]..[47,1824+26])
                                module_expr (src/lr1partial.ml[47,1824+27]..[47,1824+28])
                                  Pmod_ident "G" (src/lr1partial.ml[47,1824+27]..[47,1824+28])
                              module_expr (src/lr1partial.ml[47,1824+30]..[47,1824+31])
                                Pmod_ident "M" (src/lr1partial.ml[47,1824+30]..[47,1824+31])
                            module_expr (src/lr1partial.ml[47,1824+33]..[47,1824+34])
                              Pmod_ident "D" (src/lr1partial.ml[47,1824+33]..[47,1824+34])
                          expression (src/lr1partial.ml[48,1863+4]..[48,1863+15])
                            Pexp_ident "M.is_marked" (src/lr1partial.ml[48,1863+4]..[48,1863+15])
              ]
            structure_item (src/lr1partial.ml[55,2105+2]..[56,2122+25])
              Pstr_value Nonrec
              [
                <def>
                  pattern (src/lr1partial.ml[55,2105+6]..[55,2105+14])
                    Ppat_var "restrict" (src/lr1partial.ml[55,2105+6]..[55,2105+14])
                  expression (src/lr1partial.ml[56,2122+4]..[56,2122+25])
                    Pexp_apply
                    expression (src/lr1partial.ml[56,2122+4]..[56,2122+16])
                      Pexp_ident "Lr0.restrict" (src/lr1partial.ml[56,2122+4]..[56,2122+16])
                    [
                      <arg>
                      Nolabel
                        expression (src/lr1partial.ml[56,2122+17]..[56,2122+25])
                          Pexp_ident "X.tokens" (src/lr1partial.ml[56,2122+17]..[56,2122+25])
                    ]
              ]
            structure_item (src/lr1partial.ml[75,2944+2]..[79,3053+5])
              Pstr_type Rec
              [
                type_declaration "node" (src/lr1partial.ml[75,2944+7]..[75,2944+11]) (src/lr1partial.ml[75,2944+2]..[79,3053+5])
                  ptype_params =
                    []
                  ptype_cstrs =
                    []
                  ptype_kind =
                    Ptype_record
                      [
                        (src/lr1partial.ml[76,2960+6]..[76,2960+26])
                          Immutable
                          "state" (src/lr1partial.ml[76,2960+6]..[76,2960+11])                          core_type (src/lr1partial.ml[76,2960+13]..[76,2960+25])
                            Ptyp_constr "Lr0.lr1state" (src/lr1partial.ml[76,2960+13]..[76,2960+25])
                            []
                        (src/lr1partial.ml[77,2987+6]..[77,2987+41])
                          Immutable
                          "ancestor" (src/lr1partial.ml[77,2987+6]..[77,2987+14])                          core_type (src/lr1partial.ml[77,2987+16]..[77,2987+40])
                            Ptyp_constr "option" (src/lr1partial.ml[77,2987+34]..[77,2987+40])
                            [
                              core_type (src/lr1partial.ml[77,2987+17]..[77,2987+32])
                                Ptyp_tuple
                                [
                                  core_type (src/lr1partial.ml[77,2987+17]..[77,2987+25])
                                    Ptyp_constr "Symbol.t" (src/lr1partial.ml[77,2987+17]..[77,2987+25])
                                    []
                                  core_type (src/lr1partial.ml[77,2987+28]..[77,2987+32])
                                    Ptyp_constr "node" (src/lr1partial.ml[77,2987+28]..[77,2987+32])
                                    []
                                ]
                            ]
                        (src/lr1partial.ml[78,3029+6]..[78,3029+23])
                          Immutable
                          "shadow" (src/lr1partial.ml[78,3029+6]..[78,3029+12])                          core_type (src/lr1partial.ml[78,3029+14]..[78,3029+22])
                            Ptyp_constr "Lr1.node" (src/lr1partial.ml[78,3029+14]..[78,3029+22])
                            []
                      ]
                  ptype_private = Public
                  ptype_manifest =
                    None
              ]
            structure_item (src/lr1partial.ml[83,3132+2]..[84,3161+18])
              Pstr_value Nonrec
              [
                <def>
                  pattern (src/lr1partial.ml[83,3132+6]..[83,3132+11])
                    Ppat_var "queue" (src/lr1partial.ml[83,3132+6]..[83,3132+11])
                  core_type (src/lr1partial.ml[83,3132+14]..[83,3132+26])
                    Ptyp_constr "Queue.t" (src/lr1partial.ml[83,3132+19]..[83,3132+26])
                    [
                      core_type (src/lr1partial.ml[83,3132+14]..[83,3132+18])
                        Ptyp_constr "node" (src/lr1partial.ml[83,3132+14]..[83,3132+18])
                        []
                    ]
                  expression (src/lr1partial.ml[84,3161+4]..[84,3161+18])
                    Pexp_apply
                    expression (src/lr1partial.ml[84,3161+4]..[84,3161+16])
                      Pexp_ident "Queue.create" (src/lr1partial.ml[84,3161+4]..[84,3161+16])
                    [
                      <arg>
                      Nolabel
                        expression (src/lr1partial.ml[84,3161+16]..[84,3161+18])
                          Pexp_construct "()" (src/lr1partial.ml[84,3161+16]..[84,3161+18])
                          None
                    ]
              ]
            structure_item (src/lr1partial.ml[88,3240+2]..[89,3270+23])
              Pstr_value Nonrec
              [
                <def>
                  pattern (src/lr1partial.ml[88,3240+6]..[88,3240+9])
                    Ppat_var "map" (src/lr1partial.ml[88,3240+6]..[88,3240+9])
                  core_type (src/lr1partial.ml[88,3240+12]..[88,3240+27])
                    Ptyp_constr "array" (src/lr1partial.ml[88,3240+22]..[88,3240+27])
                    [
                      core_type (src/lr1partial.ml[88,3240+12]..[88,3240+21])
                        Ptyp_constr "list" (src/lr1partial.ml[88,3240+17]..[88,3240+21])
                        [
                          core_type (src/lr1partial.ml[88,3240+12]..[88,3240+16])
                            Ptyp_constr "node" (src/lr1partial.ml[88,3240+12]..[88,3240+16])
                            []
                        ]
                    ]
                  expression (src/lr1partial.ml[89,3270+4]..[89,3270+23])
                    Pexp_apply
                    expression (src/lr1partial.ml[89,3270+4]..[89,3270+14])
                      Pexp_ident "Array.make" (src/lr1partial.ml[89,3270+4]..[89,3270+14])
                    [
                      <arg>
                      Nolabel
                        expression (src/lr1partial.ml[89,3270+15]..[89,3270+20])
                          Pexp_ident "Lr0.n" (src/lr1partial.ml[89,3270+15]..[89,3270+20])
                      <arg>
                      Nolabel
                        expression (src/lr1partial.ml[89,3270+21]..[89,3270+23])
                          Pexp_construct "[]" (src/lr1partial.ml[89,3270+21]..[89,3270+23])
                          None
                    ]
              ]
            structure_item (src/lr1partial.ml[94,3408+2]..[94,3408+37])
              Pstr_exception
              type_exception
                ptyext_constructor =
                  extension_constructor (src/lr1partial.ml[94,3408+2]..[94,3408+37])
                    pext_name = "Goal"
                    pext_kind =
                      Pext_decl
                        [
                          core_type (src/lr1partial.ml[94,3408+20]..[94,3408+24])
                            Ptyp_constr "node" (src/lr1partial.ml[94,3408+20]..[94,3408+24])
                            []
                          core_type (src/lr1partial.ml[94,3408+27]..[94,3408+37])
                            Ptyp_constr "Terminal.t" (src/lr1partial.ml[94,3408+27]..[94,3408+37])
                            []
                        ]
                        None
            structure_item (src/lr1partial.ml[96,3447+2]..[174,6445+7])
              Pstr_value Nonrec
              [
                <def>
                  pattern (src/lr1partial.ml[96,3447+6]..[96,3447+13])
                    Ppat_var "explore" (src/lr1partial.ml[96,3447+6]..[96,3447+13])
                  expression (src/lr1partial.ml[96,3447+14]..[174,6445+7]) ghost
                    Pexp_fun
                    Nolabel
                    None
                    pattern (src/lr1partial.ml[96,3447+14]..[96,3447+22])
                      Ppat_var "ancestor" (src/lr1partial.ml[96,3447+14]..[96,3447+22])
                    expression (src/lr1partial.ml[96,3447+23]..[174,6445+7]) ghost
                      Pexp_fun
                      Nolabel
                      None
                      pattern (src/lr1partial.ml[96,3447+23]..[96,3447+29])
                        Ppat_var "shadow" (src/lr1partial.ml[96,3447+23]..[96,3447+29])
                      expression (src/lr1partial.ml[96,3447+30]..[174,6445+7]) ghost
                        Pexp_fun
                        Nolabel
                        None
                        pattern (src/lr1partial.ml[96,3447+30]..[96,3447+52])
                          Ppat_constraint
                          pattern (src/lr1partial.ml[96,3447+31]..[96,3447+36])
                            Ppat_var "state" (src/lr1partial.ml[96,3447+31]..[96,3447+36])
                          core_type (src/lr1partial.ml[96,3447+39]..[96,3447+51])
                            Ptyp_constr "Lr0.lr1state" (src/lr1partial.ml[96,3447+39]..[96,3447+51])
                            []
                        expression (src/lr1partial.ml[96,3447+53]..[174,6445+7])
                          Pexp_constraint
                          expression (src/lr1partial.ml[100,3577+4]..[174,6445+7])
                            Pexp_let Nonrec
                            [
                              <def>
                                pattern (src/lr1partial.ml[100,3577+8]..[100,3577+9])
                                  Ppat_var "k" (src/lr1partial.ml[100,3577+8]..[100,3577+9])
                                expression (src/lr1partial.ml[100,3577+12]..[100,3577+26])
                                  Pexp_apply
                                  expression (src/lr1partial.ml[100,3577+12]..[100,3577+20])
                                    Pexp_ident "Lr0.core" (src/lr1partial.ml[100,3577+12]..[100,3577+20])
                                  [
                                    <arg>
                                    Nolabel
                                      expression (src/lr1partial.ml[100,3577+21]..[100,3577+26])
                                        Pexp_ident "state" (src/lr1partial.ml[100,3577+21]..[100,3577+26])
                                  ]
                            ]
                            expression (src/lr1partial.ml[101,3607+4]..[174,6445+7])
                              Pexp_sequence
                              expression (src/lr1partial.ml[101,3607+4]..[101,3607+22])
                                Pexp_assert
                                expression (src/lr1partial.ml[101,3607+11]..[101,3607+22])
                                  Pexp_apply
                                  expression (src/lr1partial.ml[101,3607+14]..[101,3607+15])
                                    Pexp_ident "<" (src/lr1partial.ml[101,3607+14]..[101,3607+15])
                                  [
                                    <arg>
                                    Nolabel
                                      expression (src/lr1partial.ml[101,3607+12]..[101,3607+13])
                                        Pexp_ident "k" (src/lr1partial.ml[101,3607+12]..[101,3607+13])
                                    <arg>
                                    Nolabel
                                      expression (src/lr1partial.ml[101,3607+16]..[101,3607+21])
                                        Pexp_ident "Lr0.n" (src/lr1partial.ml[101,3607+16]..[101,3607+21])
                                  ]
                              expression (src/lr1partial.ml[102,3631+4]..[174,6445+7])
                                Pexp_let Nonrec
                                [
                                  <def>
                                    pattern (src/lr1partial.ml[102,3631+8]..[102,3631+15])
                                      Ppat_var "similar" (src/lr1partial.ml[102,3631+8]..[102,3631+15])
                                    expression (src/lr1partial.ml[102,3631+18]..[102,3631+25])
                                      Pexp_apply
                                      expression (src/lr1partial.ml[102,3631+18]..[102,3631+25]) ghost
                                        Pexp_ident "Array.get" (src/lr1partial.ml[102,3631+18]..[102,3631+25]) ghost
                                      [
                                        <arg>
                                        Nolabel
                                          expression (src/lr1partial.ml[102,3631+18]..[102,3631+21])
                                            Pexp_ident "map" (src/lr1partial.ml[102,3631+18]..[102,3631+21])
                                        <arg>
                                        Nolabel
                                          expression (src/lr1partial.ml[102,3631+23]..[102,3631+24])
                                            Pexp_ident "k" (src/lr1partial.ml[102,3631+23]..[102,3631+24])
                                      ]
                                ]
                                expression (src/lr1partial.ml[113,4199+4]..[174,6445+7])
                                  Pexp_ifthenelse
                                  expression (src/lr1partial.ml[113,4199+7]..[115,4294+14])
                                    Pexp_apply
                                    expression (src/lr1partial.ml[113,4199+7]..[113,4199+10])
                                      Pexp_ident "not" (src/lr1partial.ml[113,4199+7]..[113,4199+10])
                                    [
                                      <arg>
                                      Nolabel
                                        expression (src/lr1partial.ml[113,4199+11]..[115,4294+14])
                                          Pexp_apply
                                          expression (src/lr1partial.ml[113,4199+12]..[113,4199+23])
                                            Pexp_ident "List.exists" (src/lr1partial.ml[113,4199+12]..[113,4199+23])
                                          [
                                            <arg>
                                            Nolabel
                                              expression (src/lr1partial.ml[113,4199+24]..[115,4294+5])
                                                Pexp_fun
                                                Nolabel
                                                None
                                                pattern (src/lr1partial.ml[113,4199+29]..[113,4199+33])
                                                  Ppat_var "node" (src/lr1partial.ml[113,4199+29]..[113,4199+33])
                                                expression (src/lr1partial.ml[114,4236+6]..[114,4236+57])
                                                  Pexp_apply
                                                  expression (src/lr1partial.ml[114,4236+33]..[114,4236+35])
                                                    Pexp_ident "&&" (src/lr1partial.ml[114,4236+33]..[114,4236+35])
                                                  [
                                                    <arg>
                                                    Nolabel
                                                      expression (src/lr1partial.ml[114,4236+6]..[114,4236+32])
                                                        Pexp_apply
                                                        expression (src/lr1partial.ml[114,4236+6]..[114,4236+15])
                                                          Pexp_ident "Lr0.equal" (src/lr1partial.ml[114,4236+6]..[114,4236+15])
                                                        [
                                                          <arg>
                                                          Nolabel
                                                            expression (src/lr1partial.ml[114,4236+16]..[114,4236+21])
                                                              Pexp_ident "state" (src/lr1partial.ml[114,4236+16]..[114,4236+21])
                                                          <arg>
                                                          Nolabel
                                                            expression (src/lr1partial.ml[114,4236+22]..[114,4236+32])
                                                              Pexp_field
                                                              expression (src/lr1partial.ml[114,4236+22]..[114,4236+26])
                                                                Pexp_ident "node" (src/lr1partial.ml[114,4236+22]..[114,4236+26])
                                                              "state" (src/lr1partial.ml[114,4236+27]..[114,4236+32])
                                                        ]
                                                    <arg>
                                                    Nolabel
                                                      expression (src/lr1partial.ml[114,4236+36]..[114,4236+57])
                                                        Pexp_apply
                                                        expression (src/lr1partial.ml[114,4236+43]..[114,4236+45])
                                                          Pexp_ident "==" (src/lr1partial.ml[114,4236+43]..[114,4236+45])
                                                        [
                                                          <arg>
                                                          Nolabel
                                                            expression (src/lr1partial.ml[114,4236+36]..[114,4236+42])
                                                              Pexp_ident "shadow" (src/lr1partial.ml[114,4236+36]..[114,4236+42])
                                                          <arg>
                                                          Nolabel
                                                            expression (src/lr1partial.ml[114,4236+46]..[114,4236+57])
                                                              Pexp_field
                                                              expression (src/lr1partial.ml[114,4236+46]..[114,4236+50])
                                                                Pexp_ident "node" (src/lr1partial.ml[114,4236+46]..[114,4236+50])
                                                              "shadow" (src/lr1partial.ml[114,4236+51]..[114,4236+57])
                                                        ]
                                                  ]
                                            <arg>
                                            Nolabel
                                              expression (src/lr1partial.ml[115,4294+6]..[115,4294+13])
                                                Pexp_ident "similar" (src/lr1partial.ml[115,4294+6]..[115,4294+13])
                                          ]
                                    ]
                                  expression (src/lr1partial.ml[115,4294+20]..[174,6445+7])
                                    Pexp_let Nonrec
                                    [
                                      <def>
                                        pattern (src/lr1partial.ml[119,4364+10]..[119,4364+14])
                                          Ppat_var "node" (src/lr1partial.ml[119,4364+10]..[119,4364+14])
                                        expression (src/lr1partial.ml[119,4364+17]..[123,4460+7])
                                          Pexp_record
                                          [
                                            "state" (src/lr1partial.ml[120,4383+8]..[120,4383+13])
                                              expression (src/lr1partial.ml[120,4383+16]..[120,4383+21])
                                                Pexp_ident "state" (src/lr1partial.ml[120,4383+16]..[120,4383+21])
                                            "ancestor" (src/lr1partial.ml[121,4406+8]..[121,4406+16])
                                              expression (src/lr1partial.ml[121,4406+19]..[121,4406+27])
                                                Pexp_ident "ancestor" (src/lr1partial.ml[121,4406+19]..[121,4406+27])
                                            "shadow" (src/lr1partial.ml[122,4435+8]..[122,4435+14])
                                              expression (src/lr1partial.ml[122,4435+17]..[122,4435+23])
                                                Pexp_ident "shadow" (src/lr1partial.ml[122,4435+17]..[122,4435+23])
                                          ]
                                          None
                                    ]
                                    expression (src/lr1partial.ml[125,4472+6]..[172,6411+32])
                                      Pexp_sequence
                                      expression (src/lr1partial.ml[125,4472+6]..[125,4472+32])
                                        Pexp_apply
                                        expression (src/lr1partial.ml[125,4472+6]..[125,4472+32]) ghost
                                          Pexp_ident "Array.set" (src/lr1partial.ml[125,4472+6]..[125,4472+32]) ghost
                                        [
                                          <arg>
                                          Nolabel
                                            expression (src/lr1partial.ml[125,4472+6]..[125,4472+9])
                                              Pexp_ident "map" (src/lr1partial.ml[125,4472+6]..[125,4472+9])
                                          <arg>
                                          Nolabel
                                            expression (src/lr1partial.ml[125,4472+11]..[125,4472+12])
                                              Pexp_ident "k" (src/lr1partial.ml[125,4472+11]..[125,4472+12])
                                          <arg>
                                          Nolabel
                                            expression (src/lr1partial.ml[125,4472+17]..[125,4472+32])
                                              Pexp_construct "::" (src/lr1partial.ml[125,4472+22]..[125,4472+24])
                                              Some
                                                expression (src/lr1partial.ml[125,4472+17]..[125,4472+32]) ghost
                                                  Pexp_tuple
                                                  [
                                                    expression (src/lr1partial.ml[125,4472+17]..[125,4472+21])
                                                      Pexp_ident "node" (src/lr1partial.ml[125,4472+17]..[125,4472+21])
                                                    expression (src/lr1partial.ml[125,4472+25]..[125,4472+32])
                                                      Pexp_ident "similar" (src/lr1partial.ml[125,4472+25]..[125,4472+32])
                                                  ]
                                        ]
                                      expression (src/lr1partial.ml[126,4506+6]..[172,6411+32])
                                        Pexp_sequence
                                        expression (src/lr1partial.ml[126,4506+6]..[126,4506+26])
                                          Pexp_apply
                                          expression (src/lr1partial.ml[126,4506+6]..[126,4506+15])
                                            Pexp_ident "Queue.add" (src/lr1partial.ml[126,4506+6]..[126,4506+15])
                                          [
                                            <arg>
                                            Nolabel
                                              expression (src/lr1partial.ml[126,4506+16]..[126,4506+20])
                                                Pexp_ident "node" (src/lr1partial.ml[126,4506+16]..[126,4506+20])
                                            <arg>
                                            Nolabel
                                              expression (src/lr1partial.ml[126,4506+21]..[126,4506+26])
                                                Pexp_ident "queue" (src/lr1partial.ml[126,4506+21]..[126,4506+26])
                                          ]
                                        expression (src/lr1partial.ml[135,4941+6]..[172,6411+32])
                                          Pexp_ifthenelse
                                          expression (src/lr1partial.ml[135,4941+9]..[135,4941+25])
                                            Pexp_apply
                                            expression (src/lr1partial.ml[135,4941+16]..[135,4941+18])
                                              Pexp_ident "==" (src/lr1partial.ml[135,4941+16]..[135,4941+18])
                                            [
                                              <arg>
                                              Nolabel
                                                expression (src/lr1partial.ml[135,4941+9]..[135,4941+15])
                                                  Pexp_ident "shadow" (src/lr1partial.ml[135,4941+9]..[135,4941+15])
                                              <arg>
                                              Nolabel
                                                expression (src/lr1partial.ml[135,4941+19]..[135,4941+25])
                                                  Pexp_ident "X.goal" (src/lr1partial.ml[135,4941+19]..[135,4941+25])
                                            ]
                                          expression (src/lr1partial.ml[136,4972+8]..[172,6411+32])
                                            Pexp_let Nonrec
                                            [
                                              <def>
                                                pattern (src/lr1partial.ml[136,4972+12]..[136,4972+22])
                                                  Ppat_var "can_reduce" (src/lr1partial.ml[136,4972+12]..[136,4972+22])
                                                expression (src/lr1partial.ml[137,4997+10]..[137,4997+31])
                                                  Pexp_apply
                                                  expression (src/lr1partial.ml[137,4997+10]..[137,4997+13])
                                                    Pexp_ident "ref" (src/lr1partial.ml[137,4997+10]..[137,4997+13])
                                                  [
                                                    <arg>
                                                    Nolabel
                                                      expression (src/lr1partial.ml[137,4997+14]..[137,4997+31])
                                                        Pexp_ident "TerminalSet.empty" (src/lr1partial.ml[137,4997+14]..[137,4997+31])
                                                  ]
                                            ]
                                            expression (src/lr1partial.ml[138,5032+8]..[172,6411+32])
                                              Pexp_let Nonrec
                                              [
                                                <def>
                                                  pattern (src/lr1partial.ml[138,5032+12]..[138,5032+23])
                                                    Ppat_var "reductions1" (src/lr1partial.ml[138,5032+12]..[138,5032+23])
                                                  core_type (src/lr1partial.ml[138,5032+26]..[138,5032+61])
                                                    Ptyp_constr "TerminalMap.t" (src/lr1partial.ml[138,5032+48]..[138,5032+61])
                                                    [
                                                      core_type (src/lr1partial.ml[138,5032+26]..[138,5032+47])
                                                        Ptyp_constr "list" (src/lr1partial.ml[138,5032+43]..[138,5032+47])
                                                        [
                                                          core_type (src/lr1partial.ml[138,5032+26]..[138,5032+42])
                                                            Ptyp_constr "Production.index" (src/lr1partial.ml[138,5032+26]..[138,5032+42])
                                                            []
                                                        ]
                                                    ]
                                                  expression (src/lr1partial.ml[139,5096+10]..[139,5096+31])
                                                    Pexp_apply
                                                    expression (src/lr1partial.ml[139,5096+10]..[139,5096+24])
                                                      Pexp_ident "Lr1.reductions" (src/lr1partial.ml[139,5096+10]..[139,5096+24])
                                                    [
                                                      <arg>
                                                      Nolabel
                                                        expression (src/lr1partial.ml[139,5096+25]..[139,5096+31])
                                                          Pexp_ident "shadow" (src/lr1partial.ml[139,5096+25]..[139,5096+31])
                                                    ]
                                              ]
                                              expression (src/lr1partial.ml[140,5131+8]..[172,6411+32])
                                                Pexp_apply
                                                expression (src/lr1partial.ml[140,5131+8]..[140,5131+17])
                                                  Pexp_ident "List.iter" (src/lr1partial.ml[140,5131+8]..[140,5131+17])
                                                [
                                                  <arg>
                                                  Nolabel
                                                    expression (src/lr1partial.ml[140,5131+18]..[172,6411+9])
                                                      Pexp_fun
                                                      Nolabel
                                                      None
                                                      pattern (src/lr1partial.ml[140,5131+23]..[140,5131+35])
                                                        Ppat_tuple
                                                        [
                                                          pattern (src/lr1partial.ml[140,5131+24]..[140,5131+28])
                                                            Ppat_var "toks" (src/lr1partial.ml[140,5131+24]..[140,5131+28])
                                                          pattern (src/lr1partial.ml[140,5131+30]..[140,5131+34])
                                                            Ppat_var "prod" (src/lr1partial.ml[140,5131+30]..[140,5131+34])
                                                        ]
                                                      expression (src/lr1partial.ml[141,5170+10]..[171,6394+16])
                                                        Pexp_apply
                                                        expression (src/lr1partial.ml[141,5170+10]..[141,5170+26])
                                                          Pexp_ident "TerminalSet.iter" (src/lr1partial.ml[141,5170+10]..[141,5170+26])
                                                        [
                                                          <arg>
                                                          Nolabel
                                                            expression (src/lr1partial.ml[141,5170+27]..[171,6394+11])
                                                              Pexp_fun
                                                              Nolabel
                                                              None
                                                              pattern (src/lr1partial.ml[141,5170+32]..[141,5170+35])
                                                                Ppat_var "tok" (src/lr1partial.ml[141,5170+32]..[141,5170+35])
                                                              expression (src/lr1partial.ml[150,5548+12]..[169,6355+37])
                                                                Pexp_ifthenelse
                                                                expression (src/lr1partial.ml[150,5548+15]..[150,5548+65])
                                                                  Pexp_apply
                                                                  expression (src/lr1partial.ml[150,5548+15]..[150,5548+23])
                                                                    Pexp_ident "List.mem" (src/lr1partial.ml[150,5548+15]..[150,5548+23])
                                                                  [
                                                                    <arg>
                                                                    Nolabel
                                                                      expression (src/lr1partial.ml[150,5548+24]..[150,5548+28])
Pexp_ident "prod" (src/lr1partial.ml[150,5548+24]..[150,5548+28])
                                                                    <arg>
                                                                    Nolabel
                                                                      expression (src/lr1partial.ml[150,5548+29]..[150,5548+65])
Pexp_apply
expression (src/lr1partial.ml[150,5548+30]..[150,5548+48])
  Pexp_ident "TerminalMap.lookup" (src/lr1partial.ml[150,5548+30]..[150,5548+48])
[
  <arg>
  Nolabel
    expression (src/lr1partial.ml[150,5548+49]..[150,5548+52])
      Pexp_ident "tok" (src/lr1partial.ml[150,5548+49]..[150,5548+52])
  <arg>
  Nolabel
    expression (src/lr1partial.ml[150,5548+53]..[150,5548+64])
      Pexp_ident "reductions1" (src/lr1partial.ml[150,5548+53]..[150,5548+64])
]
                                                                  ]
                                                                expression (src/lr1partial.ml[152,5620+14]..[169,6355+37])
                                                                  Pexp_try
                                                                  expression (src/lr1partial.ml[153,5638+16]..[157,5812+40])
                                                                    Pexp_let Nonrec
                                                                    [
                                                                      <def>
pattern (src/lr1partial.ml[153,5638+20]..[153,5638+34])
  Ppat_constraint
  pattern (src/lr1partial.ml[153,5638+21]..[153,5638+22])
    Ppat_any
  core_type (src/lr1partial.ml[153,5638+25]..[153,5638+33])
    Ptyp_constr "Lr1.node" (src/lr1partial.ml[153,5638+25]..[153,5638+33])
    []
expression (src/lr1partial.ml[154,5675+18]..[154,5675+72])
  Pexp_apply
  expression (src/lr1partial.ml[154,5675+18]..[154,5675+32])
    Pexp_ident "SymbolMap.find" (src/lr1partial.ml[154,5675+18]..[154,5675+32])
  [
    <arg>
    Nolabel
      expression (src/lr1partial.ml[154,5675+33]..[154,5675+47])
        Pexp_construct "Symbol.T" (src/lr1partial.ml[154,5675+34]..[154,5675+42])
        Some
          expression (src/lr1partial.ml[154,5675+43]..[154,5675+46])
            Pexp_ident "tok" (src/lr1partial.ml[154,5675+43]..[154,5675+46])
    <arg>
    Nolabel
      expression (src/lr1partial.ml[154,5675+48]..[154,5675+72])
        Pexp_apply
        expression (src/lr1partial.ml[154,5675+49]..[154,5675+64])
          Pexp_ident "Lr1.transitions" (src/lr1partial.ml[154,5675+49]..[154,5675+64])
        [
          <arg>
          Nolabel
            expression (src/lr1partial.ml[154,5675+65]..[154,5675+71])
              Pexp_ident "shadow" (src/lr1partial.ml[154,5675+65]..[154,5675+71])
        ]
  ]
                                                                    ]
                                                                    expression (src/lr1partial.ml[157,5812+16]..[157,5812+40])
                                                                      Pexp_apply
                                                                      expression (src/lr1partial.ml[157,5812+16]..[157,5812+21])
Pexp_ident "raise" (src/lr1partial.ml[157,5812+16]..[157,5812+21])
                                                                      [
<arg>
Nolabel
  expression (src/lr1partial.ml[157,5812+22]..[157,5812+40])
    Pexp_construct "Goal" (src/lr1partial.ml[157,5812+23]..[157,5812+27])
    Some
      expression (src/lr1partial.ml[157,5812+28]..[157,5812+39])
        Pexp_tuple
        [
          expression (src/lr1partial.ml[157,5812+29]..[157,5812+33])
            Pexp_ident "node" (src/lr1partial.ml[157,5812+29]..[157,5812+33])
          expression (src/lr1partial.ml[157,5812+35]..[157,5812+38])
            Pexp_ident "tok" (src/lr1partial.ml[157,5812+35]..[157,5812+38])
        ]
                                                                      ]
                                                                  [
                                                                    <case>
                                                                      pattern (src/lr1partial.ml[158,5853+19]..[158,5853+28])
Ppat_construct "Not_found" (src/lr1partial.ml[158,5853+19]..[158,5853+28])
None
                                                                      expression (src/lr1partial.ml[159,5885+16]..[169,6355+37])
Pexp_let Nonrec
[
  <def>
    pattern (src/lr1partial.ml[159,5885+20]..[159,5885+24])
      Ppat_var "toks" (src/lr1partial.ml[159,5885+20]..[159,5885+24])
    expression (src/lr1partial.ml[159,5885+27]..[159,5885+38])
      Pexp_apply
      expression (src/lr1partial.ml[159,5885+27]..[159,5885+28])
        Pexp_ident "!" (src/lr1partial.ml[159,5885+27]..[159,5885+28])
      [
        <arg>
        Nolabel
          expression (src/lr1partial.ml[159,5885+28]..[159,5885+38])
            Pexp_ident "can_reduce" (src/lr1partial.ml[159,5885+28]..[159,5885+38])
      ]
]
expression (src/lr1partial.ml[163,6105+16]..[169,6355+37])
  Pexp_let Nonrec
  [
    <def>
      pattern (src/lr1partial.ml[163,6105+20]..[163,6105+25])
        Ppat_var "toks'" (src/lr1partial.ml[163,6105+20]..[163,6105+25])
      expression (src/lr1partial.ml[163,6105+28]..[163,6105+52])
        Pexp_apply
        expression (src/lr1partial.ml[163,6105+28]..[163,6105+43])
          Pexp_ident "TerminalSet.add" (src/lr1partial.ml[163,6105+28]..[163,6105+43])
        [
          <arg>
          Nolabel
            expression (src/lr1partial.ml[163,6105+44]..[163,6105+47])
              Pexp_ident "tok" (src/lr1partial.ml[163,6105+44]..[163,6105+47])
          <arg>
          Nolabel
            expression (src/lr1partial.ml[163,6105+48]..[163,6105+52])
              Pexp_ident "toks" (src/lr1partial.ml[163,6105+48]..[163,6105+52])
        ]
  ]
  expression (src/lr1partial.ml[164,6161+16]..[169,6355+37])
    Pexp_ifthenelse
    expression (src/lr1partial.ml[164,6161+19]..[164,6161+32])
      Pexp_apply
      expression (src/lr1partial.ml[164,6161+24]..[164,6161+26])
        Pexp_ident "==" (src/lr1partial.ml[164,6161+24]..[164,6161+26])
      [
        <arg>
        Nolabel
          expression (src/lr1partial.ml[164,6161+19]..[164,6161+23])
            Pexp_ident "toks" (src/lr1partial.ml[164,6161+19]..[164,6161+23])
        <arg>
        Nolabel
          expression (src/lr1partial.ml[164,6161+27]..[164,6161+32])
            Pexp_ident "toks'" (src/lr1partial.ml[164,6161+27]..[164,6161+32])
      ]
    expression (src/lr1partial.ml[166,6247+18]..[166,6247+42])
      Pexp_apply
      expression (src/lr1partial.ml[166,6247+18]..[166,6247+23])
        Pexp_ident "raise" (src/lr1partial.ml[166,6247+18]..[166,6247+23])
      [
        <arg>
        Nolabel
          expression (src/lr1partial.ml[166,6247+24]..[166,6247+42])
            Pexp_construct "Goal" (src/lr1partial.ml[166,6247+25]..[166,6247+29])
            Some
              expression (src/lr1partial.ml[166,6247+30]..[166,6247+41])
                Pexp_tuple
                [
                  expression (src/lr1partial.ml[166,6247+31]..[166,6247+35])
                    Pexp_ident "node" (src/lr1partial.ml[166,6247+31]..[166,6247+35])
                  expression (src/lr1partial.ml[166,6247+37]..[166,6247+40])
                    Pexp_ident "tok" (src/lr1partial.ml[166,6247+37]..[166,6247+40])
                ]
      ]
    Some
      expression (src/lr1partial.ml[169,6355+18]..[169,6355+37])
        Pexp_apply
        expression (src/lr1partial.ml[169,6355+29]..[169,6355+31])
          Pexp_ident ":=" (src/lr1partial.ml[169,6355+29]..[169,6355+31])
        [
          <arg>
          Nolabel
            expression (src/lr1partial.ml[169,6355+18]..[169,6355+28])
              Pexp_ident "can_reduce" (src/lr1partial.ml[169,6355+18]..[169,6355+28])
          <arg>
          Nolabel
            expression (src/lr1partial.ml[169,6355+32]..[169,6355+37])
              Pexp_ident "toks'" (src/lr1partial.ml[169,6355+32]..[169,6355+37])
        ]
                                                                  ]
                                                                None
                                                          <arg>
                                                          Nolabel
                                                            expression (src/lr1partial.ml[171,6394+12]..[171,6394+16])
                                                              Pexp_ident "toks" (src/lr1partial.ml[171,6394+12]..[171,6394+16])
                                                        ]
                                                  <arg>
                                                  Nolabel
                                                    expression (src/lr1partial.ml[172,6411+10]..[172,6411+32])
                                                      Pexp_apply
                                                      expression (src/lr1partial.ml[172,6411+11]..[172,6411+25])
                                                        Pexp_ident "Lr0.reductions" (src/lr1partial.ml[172,6411+11]..[172,6411+25])
                                                      [
                                                        <arg>
                                                        Nolabel
                                                          expression (src/lr1partial.ml[172,6411+26]..[172,6411+31])
                                                            Pexp_ident "state" (src/lr1partial.ml[172,6411+26]..[172,6411+31])
                                                      ]
                                                ]
                                          None
                                  None
                          core_type (src/lr1partial.ml[96,3447+55]..[96,3447+59])
                            Ptyp_constr "unit" (src/lr1partial.ml[96,3447+55]..[96,3447+59])
                            []
              ]
            structure_item (src/lr1partial.ml[180,6641+2]..[216,7853+15])
              Pstr_value Nonrec
              [
                <def>
                  pattern (src/lr1partial.ml[180,6641+6]..[180,6641+17])
                    Ppat_tuple
                    [
                      pattern (src/lr1partial.ml[180,6641+6]..[180,6641+10])
                        Ppat_var "goal" (src/lr1partial.ml[180,6641+6]..[180,6641+10])
                      pattern (src/lr1partial.ml[180,6641+12]..[180,6641+17])
                        Ppat_var "token" (src/lr1partial.ml[180,6641+12]..[180,6641+17])
                    ]
                  expression (src/lr1partial.ml[181,6661+4]..[216,7853+15])
                    Pexp_try
                    expression (src/lr1partial.ml[183,6670+6]..[213,7806+16])
                      Pexp_sequence
                      expression (src/lr1partial.ml[183,6670+6]..[191,6966+17])
                        Pexp_apply
                        expression (src/lr1partial.ml[183,6670+6]..[183,6670+24])
                          Pexp_ident "ProductionMap.iter" (src/lr1partial.ml[183,6670+6]..[183,6670+24])
                        [
                          <arg>
                          Nolabel
                            expression (src/lr1partial.ml[183,6670+25]..[191,6966+7])
                              Pexp_fun
                              Nolabel
                              None
                              pattern (src/lr1partial.ml[183,6670+30]..[183,6670+55])
                                Ppat_constraint
                                pattern (src/lr1partial.ml[183,6670+31]..[183,6670+35])
                                  Ppat_var "prod" (src/lr1partial.ml[183,6670+31]..[183,6670+35])
                                core_type (src/lr1partial.ml[183,6670+38]..[183,6670+54])
                                  Ptyp_constr "Production.index" (src/lr1partial.ml[183,6670+38]..[183,6670+54])
                                  []
                              expression (src/lr1partial.ml[183,6670+56]..[190,6911+54]) ghost
                                Pexp_fun
                                Nolabel
                                None
                                pattern (src/lr1partial.ml[183,6670+56]..[183,6670+70])
                                  Ppat_constraint
                                  pattern (src/lr1partial.ml[183,6670+57]..[183,6670+58])
                                    Ppat_var "k" (src/lr1partial.ml[183,6670+57]..[183,6670+58])
                                  core_type (src/lr1partial.ml[183,6670+61]..[183,6670+69])
                                    Ptyp_constr "Lr0.node" (src/lr1partial.ml[183,6670+61]..[183,6670+69])
                                    []
                                expression (src/lr1partial.ml[184,6744+8]..[190,6911+54])
                                  Pexp_let Nonrec
                                  [
                                    <def>
                                      pattern (src/lr1partial.ml[184,6744+12]..[184,6744+18])
                                        Ppat_var "shadow" (src/lr1partial.ml[184,6744+12]..[184,6744+18])
                                      expression (src/lr1partial.ml[184,6744+21]..[187,6843+24])
                                        Pexp_try
                                        expression (src/lr1partial.ml[185,6769+12]..[185,6769+45])
                                          Pexp_apply
                                          expression (src/lr1partial.ml[185,6769+12]..[185,6769+30])
                                            Pexp_ident "ProductionMap.find" (src/lr1partial.ml[185,6769+12]..[185,6769+30])
                                          [
                                            <arg>
                                            Nolabel
                                              expression (src/lr1partial.ml[185,6769+31]..[185,6769+35])
                                                Pexp_ident "prod" (src/lr1partial.ml[185,6769+31]..[185,6769+35])
                                            <arg>
                                            Nolabel
                                              expression (src/lr1partial.ml[185,6769+36]..[185,6769+45])
                                                Pexp_ident "Lr1.entry" (src/lr1partial.ml[185,6769+36]..[185,6769+45])
                                          ]
                                        [
                                          <case>
                                            pattern (src/lr1partial.ml[186,6815+15]..[186,6815+24])
                                              Ppat_construct "Not_found" (src/lr1partial.ml[186,6815+15]..[186,6815+24])
                                              None
                                            expression (src/lr1partial.ml[187,6843+12]..[187,6843+24])
                                              Pexp_assert
                                              expression (src/lr1partial.ml[187,6843+19]..[187,6843+24])
                                                Pexp_construct "false" (src/lr1partial.ml[187,6843+19]..[187,6843+24])
                                                None
                                        ]
                                  ]
                                  expression (src/lr1partial.ml[189,6879+8]..[190,6911+54])
                                    Pexp_ifthenelse
                                    expression (src/lr1partial.ml[189,6879+11]..[189,6879+26])
                                      Pexp_apply
                                      expression (src/lr1partial.ml[189,6879+11]..[189,6879+19])
                                        Pexp_ident "relevant" (src/lr1partial.ml[189,6879+11]..[189,6879+19])
                                      [
                                        <arg>
                                        Nolabel
                                          expression (src/lr1partial.ml[189,6879+20]..[189,6879+26])
                                            Pexp_ident "shadow" (src/lr1partial.ml[189,6879+20]..[189,6879+26])
                                      ]
                                    expression (src/lr1partial.ml[190,6911+10]..[190,6911+54])
                                      Pexp_apply
                                      expression (src/lr1partial.ml[190,6911+10]..[190,6911+17])
                                        Pexp_ident "explore" (src/lr1partial.ml[190,6911+10]..[190,6911+17])
                                      [
                                        <arg>
                                        Nolabel
                                          expression (src/lr1partial.ml[190,6911+18]..[190,6911+22])
                                            Pexp_construct "None" (src/lr1partial.ml[190,6911+18]..[190,6911+22])
                                            None
                                        <arg>
                                        Nolabel
                                          expression (src/lr1partial.ml[190,6911+23]..[190,6911+29])
                                            Pexp_ident "shadow" (src/lr1partial.ml[190,6911+23]..[190,6911+29])
                                        <arg>
                                        Nolabel
                                          expression (src/lr1partial.ml[190,6911+30]..[190,6911+54])
                                            Pexp_apply
                                            expression (src/lr1partial.ml[190,6911+31]..[190,6911+39])
                                              Pexp_ident "restrict" (src/lr1partial.ml[190,6911+31]..[190,6911+39])
                                            [
                                              <arg>
                                              Nolabel
                                                expression (src/lr1partial.ml[190,6911+40]..[190,6911+53])
                                                  Pexp_apply
                                                  expression (src/lr1partial.ml[190,6911+41]..[190,6911+50])
                                                    Pexp_ident "Lr0.start" (src/lr1partial.ml[190,6911+41]..[190,6911+50])
                                                  [
                                                    <arg>
                                                    Nolabel
                                                      expression (src/lr1partial.ml[190,6911+51]..[190,6911+52])
                                                        Pexp_ident "k" (src/lr1partial.ml[190,6911+51]..[190,6911+52])
                                                  ]
                                            ]
                                      ]
                                    None
                          <arg>
                          Nolabel
                            expression (src/lr1partial.ml[191,6966+8]..[191,6966+17])
                              Pexp_ident "Lr0.entry" (src/lr1partial.ml[191,6966+8]..[191,6966+17])
                        ]
                      expression (src/lr1partial.ml[193,6986+6]..[213,7806+16])
                        Pexp_sequence
                        expression (src/lr1partial.ml[193,6986+6]..[205,7498+13])
                          Pexp_apply
                          expression (src/lr1partial.ml[193,6986+6]..[193,6986+16])
                            Pexp_ident "Misc.qiter" (src/lr1partial.ml[193,6986+6]..[193,6986+16])
                          [
                            <arg>
                            Nolabel
                              expression (src/lr1partial.ml[193,6986+17]..[205,7498+7])
                                Pexp_fun
                                Nolabel
                                None
                                pattern (src/lr1partial.ml[193,6986+22]..[193,6986+26])
                                  Ppat_var "node" (src/lr1partial.ml[193,6986+22]..[193,6986+26])
                                expression (src/lr1partial.ml[194,7016+8]..[204,7459+38])
                                  Pexp_apply
                                  expression (src/lr1partial.ml[194,7016+8]..[194,7016+22])
                                    Pexp_ident "SymbolMap.iter" (src/lr1partial.ml[194,7016+8]..[194,7016+22])
                                  [
                                    <arg>
                                    Nolabel
                                      expression (src/lr1partial.ml[194,7016+23]..[204,7459+9])
                                        Pexp_fun
                                        Nolabel
                                        None
                                        pattern (src/lr1partial.ml[194,7016+28]..[194,7016+34])
                                          Ppat_var "symbol" (src/lr1partial.ml[194,7016+28]..[194,7016+34])
                                        expression (src/lr1partial.ml[194,7016+35]..[203,7444+14]) ghost
                                          Pexp_fun
                                          Nolabel
                                          None
                                          pattern (src/lr1partial.ml[194,7016+35]..[194,7016+40])
                                            Ppat_var "state" (src/lr1partial.ml[194,7016+35]..[194,7016+40])
                                          expression (src/lr1partial.ml[195,7060+10]..[203,7444+14])
                                            Pexp_try
                                            expression (src/lr1partial.ml[196,7074+12]..[199,7204+67])
                                              Pexp_let Nonrec
                                              [
                                                <def>
                                                  pattern (src/lr1partial.ml[196,7074+16]..[196,7074+22])
                                                    Ppat_var "shadow" (src/lr1partial.ml[196,7074+16]..[196,7074+22])
                                                  expression (src/lr1partial.ml[197,7099+14]..[197,7099+65])
                                                    Pexp_apply
                                                    expression (src/lr1partial.ml[197,7099+14]..[197,7099+28])
                                                      Pexp_ident "SymbolMap.find" (src/lr1partial.ml[197,7099+14]..[197,7099+28])
                                                    [
                                                      <arg>
                                                      Nolabel
                                                        expression (src/lr1partial.ml[197,7099+29]..[197,7099+35])
                                                          Pexp_ident "symbol" (src/lr1partial.ml[197,7099+29]..[197,7099+35])
                                                      <arg>
                                                      Nolabel
                                                        expression (src/lr1partial.ml[197,7099+36]..[197,7099+65])
                                                          Pexp_apply
                                                          expression (src/lr1partial.ml[197,7099+37]..[197,7099+52])
                                                            Pexp_ident "Lr1.transitions" (src/lr1partial.ml[197,7099+37]..[197,7099+52])
                                                          [
                                                            <arg>
                                                            Nolabel
                                                              expression (src/lr1partial.ml[197,7099+53]..[197,7099+64])
                                                                Pexp_field
                                                                expression (src/lr1partial.ml[197,7099+53]..[197,7099+57])
                                                                  Pexp_ident "node" (src/lr1partial.ml[197,7099+53]..[197,7099+57])
                                                                "shadow" (src/lr1partial.ml[197,7099+58]..[197,7099+64])
                                                          ]
                                                    ]
                                              ]
                                              expression (src/lr1partial.ml[198,7168+12]..[199,7204+67])
                                                Pexp_ifthenelse
                                                expression (src/lr1partial.ml[198,7168+15]..[198,7168+30])
                                                  Pexp_apply
                                                  expression (src/lr1partial.ml[198,7168+15]..[198,7168+23])
                                                    Pexp_ident "relevant" (src/lr1partial.ml[198,7168+15]..[198,7168+23])
                                                  [
                                                    <arg>
                                                    Nolabel
                                                      expression (src/lr1partial.ml[198,7168+24]..[198,7168+30])
                                                        Pexp_ident "shadow" (src/lr1partial.ml[198,7168+24]..[198,7168+30])
                                                  ]
                                                expression (src/lr1partial.ml[199,7204+14]..[199,7204+67])
                                                  Pexp_apply
                                                  expression (src/lr1partial.ml[199,7204+14]..[199,7204+21])
                                                    Pexp_ident "explore" (src/lr1partial.ml[199,7204+14]..[199,7204+21])
                                                  [
                                                    <arg>
                                                    Nolabel
                                                      expression (src/lr1partial.ml[199,7204+22]..[199,7204+43])
                                                        Pexp_construct "Some" (src/lr1partial.ml[199,7204+23]..[199,7204+27])
                                                        Some
                                                          expression (src/lr1partial.ml[199,7204+28]..[199,7204+42])
                                                            Pexp_tuple
                                                            [
                                                              expression (src/lr1partial.ml[199,7204+29]..[199,7204+35])
                                                                Pexp_ident "symbol" (src/lr1partial.ml[199,7204+29]..[199,7204+35])
                                                              expression (src/lr1partial.ml[199,7204+37]..[199,7204+41])
                                                                Pexp_ident "node" (src/lr1partial.ml[199,7204+37]..[199,7204+41])
                                                            ]
                                                    <arg>
                                                    Nolabel
                                                      expression (src/lr1partial.ml[199,7204+44]..[199,7204+50])
                                                        Pexp_ident "shadow" (src/lr1partial.ml[199,7204+44]..[199,7204+50])
                                                    <arg>
                                                    Nolabel
                                                      expression (src/lr1partial.ml[199,7204+51]..[199,7204+67])
                                                        Pexp_apply
                                                        expression (src/lr1partial.ml[199,7204+52]..[199,7204+60])
                                                          Pexp_ident "restrict" (src/lr1partial.ml[199,7204+52]..[199,7204+60])
                                                        [
                                                          <arg>
                                                          Nolabel
                                                            expression (src/lr1partial.ml[199,7204+61]..[199,7204+66])
                                                              Pexp_ident "state" (src/lr1partial.ml[199,7204+61]..[199,7204+66])
                                                        ]
                                                  ]
                                                None
                                            [
                                              <case>
                                                pattern (src/lr1partial.ml[200,7272+15]..[200,7272+24])
                                                  Ppat_construct "Not_found" (src/lr1partial.ml[200,7272+15]..[200,7272+24])
                                                  None
                                                expression (src/lr1partial.ml[203,7444+12]..[203,7444+14])
                                                  Pexp_construct "()" (src/lr1partial.ml[203,7444+12]..[203,7444+14])
                                                  None
                                            ]
                                    <arg>
                                    Nolabel
                                      expression (src/lr1partial.ml[204,7459+10]..[204,7459+38])
                                        Pexp_apply
                                        expression (src/lr1partial.ml[204,7459+11]..[204,7459+26])
                                          Pexp_ident "Lr0.transitions" (src/lr1partial.ml[204,7459+11]..[204,7459+26])
                                        [
                                          <arg>
                                          Nolabel
                                            expression (src/lr1partial.ml[204,7459+27]..[204,7459+37])
                                              Pexp_field
                                              expression (src/lr1partial.ml[204,7459+27]..[204,7459+31])
                                                Pexp_ident "node" (src/lr1partial.ml[204,7459+27]..[204,7459+31])
                                              "state" (src/lr1partial.ml[204,7459+32]..[204,7459+37])
                                        ]
                                  ]
                            <arg>
                            Nolabel
                              expression (src/lr1partial.ml[205,7498+8]..[205,7498+13])
                                Pexp_ident "queue" (src/lr1partial.ml[205,7498+8]..[205,7498+13])
                          ]
                        expression (src/lr1partial.ml[213,7806+6]..[213,7806+16])
                          Pexp_apply
                          expression (src/lr1partial.ml[213,7806+6]..[213,7806+11])
                            Pexp_ident "raise" (src/lr1partial.ml[213,7806+6]..[213,7806+11])
                          [
                            <arg>
                            Nolabel
                              expression (src/lr1partial.ml[213,7806+12]..[213,7806+16])
                                Pexp_construct "Oops" (src/lr1partial.ml[213,7806+12]..[213,7806+16])
                                None
                          ]
                    [
                      <case>
                        pattern (src/lr1partial.ml[215,7824+9]..[215,7824+25])
                          Ppat_construct "Goal" (src/lr1partial.ml[215,7824+9]..[215,7824+13])
                          Some
                            []
                            pattern (src/lr1partial.ml[215,7824+14]..[215,7824+25])
                              Ppat_tuple
                              [
                                pattern (src/lr1partial.ml[215,7824+15]..[215,7824+19])
                                  Ppat_var "node" (src/lr1partial.ml[215,7824+15]..[215,7824+19])
                                pattern (src/lr1partial.ml[215,7824+21]..[215,7824+24])
                                  Ppat_var "tok" (src/lr1partial.ml[215,7824+21]..[215,7824+24])
                              ]
                        expression (src/lr1partial.ml[216,7853+6]..[216,7853+15])
                          Pexp_tuple
                          [
                            expression (src/lr1partial.ml[216,7853+6]..[216,7853+10])
                              Pexp_ident "node" (src/lr1partial.ml[216,7853+6]..[216,7853+10])
                            expression (src/lr1partial.ml[216,7853+12]..[216,7853+15])
                              Pexp_ident "tok" (src/lr1partial.ml[216,7853+12]..[216,7853+15])
                          ]
                    ]
              ]
            structure_item (src/lr1partial.ml[221,7978+2]..[230,8212+18])
              Pstr_value Nonrec
              [
                <def>
                  pattern (src/lr1partial.ml[221,7978+6]..[221,7978+18])
                    Ppat_tuple
                    [
                      pattern (src/lr1partial.ml[221,7978+6]..[221,7978+12])
                        Ppat_var "source" (src/lr1partial.ml[221,7978+6]..[221,7978+12])
                      pattern (src/lr1partial.ml[221,7978+14]..[221,7978+18])
                        Ppat_var "path" (src/lr1partial.ml[221,7978+14]..[221,7978+18])
                    ]
                  expression (src/lr1partial.ml[223,8000+4]..[230,8212+18])
                    Pexp_let Rec
                    [
                      <def>
                        pattern (src/lr1partial.ml[223,8000+12]..[223,8000+18])
                          Ppat_var "follow" (src/lr1partial.ml[223,8000+12]..[223,8000+18])
                        expression (src/lr1partial.ml[223,8000+19]..[228,8166+38]) ghost
                          Pexp_fun
                          Nolabel
                          None
                          pattern (src/lr1partial.ml[223,8000+19]..[223,8000+23])
                            Ppat_var "path" (src/lr1partial.ml[223,8000+19]..[223,8000+23])
                          expression (src/lr1partial.ml[223,8000+24]..[228,8166+38]) ghost
                            Pexp_fun
                            Nolabel
                            None
                            pattern (src/lr1partial.ml[223,8000+24]..[223,8000+28])
                              Ppat_var "node" (src/lr1partial.ml[223,8000+24]..[223,8000+28])
                            expression (src/lr1partial.ml[224,8031+6]..[228,8166+38])
                              Pexp_match
                              expression (src/lr1partial.ml[224,8031+12]..[224,8031+25])
                                Pexp_field
                                expression (src/lr1partial.ml[224,8031+12]..[224,8031+16])
                                  Pexp_ident "node" (src/lr1partial.ml[224,8031+12]..[224,8031+16])
                                "ancestor" (src/lr1partial.ml[224,8031+17]..[224,8031+25])
                              [
                                <case>
                                  pattern (src/lr1partial.ml[225,8062+8]..[225,8062+12])
                                    Ppat_construct "None" (src/lr1partial.ml[225,8062+8]..[225,8062+12])
                                    None
                                  expression (src/lr1partial.ml[226,8078+10]..[226,8078+56])
                                    Pexp_tuple
                                    [
                                      expression (src/lr1partial.ml[226,8078+10]..[226,8078+36])
                                        Pexp_apply
                                        expression (src/lr1partial.ml[226,8078+10]..[226,8078+24])
                                          Pexp_ident "Lr1.start2item" (src/lr1partial.ml[226,8078+10]..[226,8078+24])
                                        [
                                          <arg>
                                          Nolabel
                                            expression (src/lr1partial.ml[226,8078+25]..[226,8078+36])
                                              Pexp_field
                                              expression (src/lr1partial.ml[226,8078+25]..[226,8078+29])
                                                Pexp_ident "node" (src/lr1partial.ml[226,8078+25]..[226,8078+29])
                                              "shadow" (src/lr1partial.ml[226,8078+30]..[226,8078+36])
                                        ]
                                      expression (src/lr1partial.ml[226,8078+38]..[226,8078+56])
                                        Pexp_apply
                                        expression (src/lr1partial.ml[226,8078+38]..[226,8078+51])
                                          Pexp_ident "Array.of_list" (src/lr1partial.ml[226,8078+38]..[226,8078+51])
                                        [
                                          <arg>
                                          Nolabel
                                            expression (src/lr1partial.ml[226,8078+52]..[226,8078+56])
                                              Pexp_ident "path" (src/lr1partial.ml[226,8078+52]..[226,8078+56])
                                        ]
                                    ]
                                <case>
                                  pattern (src/lr1partial.ml[227,8135+8]..[227,8135+27])
                                    Ppat_construct "Some" (src/lr1partial.ml[227,8135+8]..[227,8135+12])
                                    Some
                                      []
                                      pattern (src/lr1partial.ml[227,8135+13]..[227,8135+27])
                                        Ppat_tuple
                                        [
                                          pattern (src/lr1partial.ml[227,8135+14]..[227,8135+20])
                                            Ppat_var "symbol" (src/lr1partial.ml[227,8135+14]..[227,8135+20])
                                          pattern (src/lr1partial.ml[227,8135+22]..[227,8135+26])
                                            Ppat_var "node" (src/lr1partial.ml[227,8135+22]..[227,8135+26])
                                        ]
                                  expression (src/lr1partial.ml[228,8166+10]..[228,8166+38])
                                    Pexp_apply
                                    expression (src/lr1partial.ml[228,8166+10]..[228,8166+16])
                                      Pexp_ident "follow" (src/lr1partial.ml[228,8166+10]..[228,8166+16])
                                    [
                                      <arg>
                                      Nolabel
                                        expression (src/lr1partial.ml[228,8166+17]..[228,8166+33])
                                          Pexp_construct "::" (src/lr1partial.ml[228,8166+25]..[228,8166+27])
                                          Some
                                            expression (src/lr1partial.ml[228,8166+18]..[228,8166+32]) ghost
                                              Pexp_tuple
                                              [
                                                expression (src/lr1partial.ml[228,8166+18]..[228,8166+24])
                                                  Pexp_ident "symbol" (src/lr1partial.ml[228,8166+18]..[228,8166+24])
                                                expression (src/lr1partial.ml[228,8166+28]..[228,8166+32])
                                                  Pexp_ident "path" (src/lr1partial.ml[228,8166+28]..[228,8166+32])
                                              ]
                                      <arg>
                                      Nolabel
                                        expression (src/lr1partial.ml[228,8166+34]..[228,8166+38])
                                          Pexp_ident "node" (src/lr1partial.ml[228,8166+34]..[228,8166+38])
                                    ]
                              ]
                    ]
                    expression (src/lr1partial.ml[230,8212+4]..[230,8212+18])
                      Pexp_apply
                      expression (src/lr1partial.ml[230,8212+4]..[230,8212+10])
                        Pexp_ident "follow" (src/lr1partial.ml[230,8212+4]..[230,8212+10])
                      [
                        <arg>
                        Nolabel
                          expression (src/lr1partial.ml[230,8212+11]..[230,8212+13])
                            Pexp_construct "[]" (src/lr1partial.ml[230,8212+11]..[230,8212+13])
                            None
                        <arg>
                        Nolabel
                          expression (src/lr1partial.ml[230,8212+14]..[230,8212+18])
                            Pexp_ident "goal" (src/lr1partial.ml[230,8212+14]..[230,8212+18])
                      ]
              ]
            structure_item (src/lr1partial.ml[232,8232+2]..[233,8245+25])
              Pstr_value Nonrec
              [
                <def>
                  pattern (src/lr1partial.ml[232,8232+6]..[232,8232+10])
                    Ppat_var "goal" (src/lr1partial.ml[232,8232+6]..[232,8232+10])
                  expression (src/lr1partial.ml[233,8245+4]..[233,8245+25])
                    Pexp_apply
                    expression (src/lr1partial.ml[233,8245+4]..[233,8245+14])
                      Pexp_ident "Lr0.export" (src/lr1partial.ml[233,8245+4]..[233,8245+14])
                    [
                      <arg>
                      Nolabel
                        expression (src/lr1partial.ml[233,8245+15]..[233,8245+25])
                          Pexp_field
                          expression (src/lr1partial.ml[233,8245+15]..[233,8245+19])
                            Pexp_ident "goal" (src/lr1partial.ml[233,8245+15]..[233,8245+19])
                          "state" (src/lr1partial.ml[233,8245+20]..[233,8245+25])
                    ]
              ]
          ]
]

open Grammar
exception Oops 
module Run(X:sig val tokens : TerminalSet.t val goal : Lr1.node end) =
  struct
    let relevant : Lr1.node -> bool =
      let module G =
        struct include Lr1.BackwardEdges
               let foreach_root f = f X.goal end in
        let module M = (DFS.MarkArray)(Lr1) in
          let module D =
            struct
              let discover _node = ()
              let traverse _source _label _target = ()
            end in let module R = (((DFS.Run)(G))(M))(D) in M.is_marked
    let restrict = Lr0.restrict X.tokens
    type node =
      {
      state: Lr0.lr1state ;
      ancestor: (Symbol.t * node) option ;
      shadow: Lr1.node }
    let queue : node Queue.t = Queue.create ()
    let map : node list array = Array.make Lr0.n []
    exception Goal of node * Terminal.t 
    let explore ancestor shadow (state : Lr0.lr1state) =
      (let k = Lr0.core state in
       assert (k < Lr0.n);
       (let similar = map.(k) in
        if
          not
            (List.exists
               (fun node ->
                  (Lr0.equal state node.state) && (shadow == node.shadow))
               similar)
        then
          let node = { state; ancestor; shadow } in
          (map.(k) <- (node :: similar);
           Queue.add node queue;
           if shadow == X.goal
           then
             (let can_reduce = ref TerminalSet.empty in
              let reductions1 : Production.index list TerminalMap.t =
                Lr1.reductions shadow in
              List.iter
                (fun (toks, prod) ->
                   TerminalSet.iter
                     (fun tok ->
                        if List.mem prod (TerminalMap.lookup tok reductions1)
                        then
                          try
                            let (_ : Lr1.node) =
                              SymbolMap.find (Symbol.T tok)
                                (Lr1.transitions shadow) in
                            raise (Goal (node, tok))
                          with
                          | Not_found ->
                              let toks = !can_reduce in
                              let toks' = TerminalSet.add tok toks in
                              (if toks == toks'
                               then raise (Goal (node, tok))
                               else can_reduce := toks')) toks)
                (Lr0.reductions state)))) : unit)
    let (goal, token) =
      try
        ProductionMap.iter
          (fun (prod : Production.index) ->
             fun (k : Lr0.node) ->
               let shadow =
                 try ProductionMap.find prod Lr1.entry
                 with | Not_found -> assert false in
               if relevant shadow
               then explore None shadow (restrict (Lr0.start k))) Lr0.entry;
        Misc.qiter
          (fun node ->
             SymbolMap.iter
               (fun symbol ->
                  fun state ->
                    try
                      let shadow =
                        SymbolMap.find symbol (Lr1.transitions node.shadow) in
                      if relevant shadow
                      then
                        explore (Some (symbol, node)) shadow (restrict state)
                    with | Not_found -> ()) (Lr0.transitions node.state))
          queue;
        raise Oops
      with | Goal (node, tok) -> (node, tok)
    let (source, path) =
      let rec follow path node =
        match node.ancestor with
        | None -> ((Lr1.start2item node.shadow), (Array.of_list path))
        | Some (symbol, node) -> follow (symbol :: path) node in
      follow [] goal
    let goal = Lr0.export goal.state
  end
[
  structure_item (src/lr1partial.ml[14,1000+0]..src/lr1partial.ml[14,1000+12])
    Tstr_open Fresh
    module_expr (src/lr1partial.ml[14,1000+5]..src/lr1partial.ml[14,1000+12])
      Tmod_ident "Dune__exe!.Grammar"
  structure_item (src/lr1partial.ml[16,1014+0]..src/lr1partial.ml[16,1014+14])
    Tstr_exception
    type_exception
      ptyext_constructor =
        extension_constructor (src/lr1partial.ml[16,1014+0]..src/lr1partial.ml[16,1014+14])
          pext_name = "Oops/414"
          pext_kind =
            Text_decl
              []
              None
  structure_item (src/lr1partial.ml[18,1030+0]..src/lr1partial.ml[235,8272+3])
    Tstr_module
    Run/1416
      module_expr (src/lr1partial.ml[18,1030+11]..src/lr1partial.ml[235,8272+3])
        Tmod_functor "X/497"
        module_type (src/lr1partial.ml[18,1030+16]..src/lr1partial.ml[29,1236+3])
          Tmty_signature
          [
            signature_item (src/lr1partial.ml[22,1100+2]..src/lr1partial.ml[22,1100+27])
              Tsig_value
              value_description tokens/454 (src/lr1partial.ml[22,1100+2]..src/lr1partial.ml[22,1100+27])
                core_type (src/lr1partial.ml[22,1100+14]..src/lr1partial.ml[22,1100+27])
                  Ttyp_constr "Dune__exe!.Grammar.TerminalSet.t"
                  []
                []
            signature_item (src/lr1partial.ml[27,1214+2]..src/lr1partial.ml[27,1214+20])
              Tsig_value
              value_description goal/496 (src/lr1partial.ml[27,1214+2]..src/lr1partial.ml[27,1214+20])
                core_type (src/lr1partial.ml[27,1214+12]..src/lr1partial.ml[27,1214+20])
                  Ttyp_constr "Dune__exe!.Lr1.node"
                  []
                []
          ]
        module_expr (src/lr1partial.ml[29,1236+7]..src/lr1partial.ml[235,8272+3])
          module_expr (src/lr1partial.ml[29,1236+7]..src/lr1partial.ml[235,8272+3])
            Tmod_structure
            [
              structure_item (src/lr1partial.ml[36,1520+2]..src/lr1partial.ml[48,1863+15])
                Tstr_value Nonrec
                [
                  <def>
                    pattern (src/lr1partial.ml[36,1520+6]..src/lr1partial.ml[36,1520+14])
                      extra
                        Tpat_extra_constraint
                        core_type (src/lr1partial.ml[36,1520+17]..src/lr1partial.ml[36,1520+33])
                          Ttyp_arrow
                          Nolabel
                          core_type (src/lr1partial.ml[36,1520+17]..src/lr1partial.ml[36,1520+25])
                            Ttyp_constr "Dune__exe!.Lr1.node"
                            []
                          core_type (src/lr1partial.ml[36,1520+29]..src/lr1partial.ml[36,1520+33])
                            Ttyp_constr "bool/5!"
                            []
                      Tpat_alias "relevant/498"
                      pattern (src/lr1partial.ml[36,1520+6]..src/lr1partial.ml[36,1520+14])
                        Tpat_any
                    expression (src/lr1partial.ml[37,1556+4]..src/lr1partial.ml[48,1863+15])
                      extra
                        Texp_constraint
                        core_type (src/lr1partial.ml[36,1520+17]..src/lr1partial.ml[36,1520+33])
                          Ttyp_arrow
                          Nolabel
                          core_type (src/lr1partial.ml[36,1520+17]..src/lr1partial.ml[36,1520+25])
                            Ttyp_constr "Dune__exe!.Lr1.node"
                            []
                          core_type (src/lr1partial.ml[36,1520+29]..src/lr1partial.ml[36,1520+33])
                            Ttyp_constr "bool/5!"
                            []
                      Texp_letmodule "G/549"
                      module_expr (src/lr1partial.ml[37,1556+19]..src/lr1partial.ml[41,1658+7])
                        Tmod_structure
                        [
                          structure_item (src/lr1partial.ml[38,1582+6]..src/lr1partial.ml[38,1582+31])
                            Tstr_include                            module_expr (src/lr1partial.ml[38,1582+14]..src/lr1partial.ml[38,1582+31])
                              module_expr (src/lr1partial.ml[38,1582+14]..src/lr1partial.ml[38,1582+31])
                                Tmod_ident "Dune__exe!.Lr1.BackwardEdges"
                          structure_item (src/lr1partial.ml[39,1614+6]..src/lr1partial.ml[40,1641+16])
                            Tstr_value Nonrec
                            [
                              <def>
                                pattern (src/lr1partial.ml[39,1614+10]..src/lr1partial.ml[39,1614+22])
                                  Tpat_var "foreach_root/546"
                                expression (src/lr1partial.ml[39,1614+23]..src/lr1partial.ml[40,1641+16]) ghost
                                  Texp_function
                                  Nolabel
                                  [
                                    <case>
                                      pattern (src/lr1partial.ml[39,1614+23]..src/lr1partial.ml[39,1614+24])
                                        Tpat_var "f/548"
                                      expression (src/lr1partial.ml[40,1641+8]..src/lr1partial.ml[40,1641+16])
                                        Texp_apply
                                        expression (src/lr1partial.ml[40,1641+8]..src/lr1partial.ml[40,1641+9])
                                          Texp_ident "f/548"
                                        [
                                          <arg>
                                            Nolabel
                                            expression (src/lr1partial.ml[40,1641+10]..src/lr1partial.ml[40,1641+16])
                                              Texp_ident "X/497.goal"
                                        ]
                                  ]
                            ]
                        ]
                      expression (src/lr1partial.ml[42,1669+4]..src/lr1partial.ml[48,1863+15])
                        Texp_letmodule "M/580"
                        module_expr (src/lr1partial.ml[42,1669+19]..src/lr1partial.ml[42,1669+37])
                          Tmod_apply
                          module_expr (src/lr1partial.ml[42,1669+19]..src/lr1partial.ml[42,1669+32])
                            module_expr (src/lr1partial.ml[42,1669+19]..src/lr1partial.ml[42,1669+32])
                              Tmod_ident "Dune__exe!.DFS.MarkArray"
                          module_expr (src/lr1partial.ml[42,1669+33]..src/lr1partial.ml[42,1669+36])
                            module_expr (src/lr1partial.ml[42,1669+33]..src/lr1partial.ml[42,1669+36])
                              Tmod_ident "Dune__exe!.Lr1"
                        expression (src/lr1partial.ml[43,1710+4]..src/lr1partial.ml[48,1863+15])
                          Texp_letmodule "D/589"
                          module_expr (src/lr1partial.ml[43,1710+19]..src/lr1partial.ml[46,1813+7])
                            Tmod_structure
                            [
                              structure_item (src/lr1partial.ml[44,1736+6]..src/lr1partial.ml[44,1736+29])
                                Tstr_value Nonrec
                                [
                                  <def>
                                    pattern (src/lr1partial.ml[44,1736+10]..src/lr1partial.ml[44,1736+18])
                                      Tpat_var "discover/581"
                                    expression (src/lr1partial.ml[44,1736+19]..src/lr1partial.ml[44,1736+29]) ghost
                                      Texp_function
                                      Nolabel
                                      [
                                        <case>
                                          pattern (src/lr1partial.ml[44,1736+19]..src/lr1partial.ml[44,1736+24])
                                            Tpat_var "_node/583"
                                          expression (src/lr1partial.ml[44,1736+27]..src/lr1partial.ml[44,1736+29])
                                            Texp_construct "()"
                                            []
                                      ]
                                ]
                              structure_item (src/lr1partial.ml[45,1766+6]..src/lr1partial.ml[45,1766+46])
                                Tstr_value Nonrec
                                [
                                  <def>
                                    pattern (src/lr1partial.ml[45,1766+10]..src/lr1partial.ml[45,1766+18])
                                      Tpat_var "traverse/584"
                                    expression (src/lr1partial.ml[45,1766+19]..src/lr1partial.ml[45,1766+46]) ghost
                                      Texp_function
                                      Nolabel
                                      [
                                        <case>
                                          pattern (src/lr1partial.ml[45,1766+19]..src/lr1partial.ml[45,1766+26])
                                            Tpat_var "_source/586"
                                          expression (src/lr1partial.ml[45,1766+27]..src/lr1partial.ml[45,1766+46]) ghost
                                            Texp_function
                                            Nolabel
                                            [
                                              <case>
                                                pattern (src/lr1partial.ml[45,1766+27]..src/lr1partial.ml[45,1766+33])
                                                  Tpat_var "_label/587"
                                                expression (src/lr1partial.ml[45,1766+34]..src/lr1partial.ml[45,1766+46]) ghost
                                                  Texp_function
                                                  Nolabel
                                                  [
                                                    <case>
                                                      pattern (src/lr1partial.ml[45,1766+34]..src/lr1partial.ml[45,1766+41])
                                                        Tpat_var "_target/588"
                                                      expression (src/lr1partial.ml[45,1766+44]..src/lr1partial.ml[45,1766+46])
                                                        Texp_construct "()"
                                                        []
                                                  ]
                                            ]
                                      ]
                                ]
                            ]
                          expression (src/lr1partial.ml[47,1824+4]..src/lr1partial.ml[48,1863+15])
                            Texp_letmodule "R/607"
                            module_expr (src/lr1partial.ml[47,1824+19]..src/lr1partial.ml[47,1824+35])
                              Tmod_apply
                              module_expr (src/lr1partial.ml[47,1824+19]..src/lr1partial.ml[47,1824+32])
                                Tmod_apply
                                module_expr (src/lr1partial.ml[47,1824+19]..src/lr1partial.ml[47,1824+29])
                                  Tmod_apply
                                  module_expr (src/lr1partial.ml[47,1824+19]..src/lr1partial.ml[47,1824+26])
                                    module_expr (src/lr1partial.ml[47,1824+19]..src/lr1partial.ml[47,1824+26])
                                      Tmod_ident "Dune__exe!.DFS.Run"
                                  module_expr (src/lr1partial.ml[47,1824+27]..src/lr1partial.ml[47,1824+28])
                                    Tmod_ident "G/549"
                                module_expr (src/lr1partial.ml[47,1824+30]..src/lr1partial.ml[47,1824+31])
                                  Tmod_ident "M/580"
                              module_expr (src/lr1partial.ml[47,1824+33]..src/lr1partial.ml[47,1824+34])
                                Tmod_ident "D/589"
                            expression (src/lr1partial.ml[48,1863+4]..src/lr1partial.ml[48,1863+15])
                              Texp_ident "M/580.is_marked"
                ]
              structure_item (src/lr1partial.ml[55,2105+2]..src/lr1partial.ml[56,2122+25])
                Tstr_value Nonrec
                [
                  <def>
                    pattern (src/lr1partial.ml[55,2105+6]..src/lr1partial.ml[55,2105+14])
                      Tpat_var "restrict/608"
                    expression (src/lr1partial.ml[56,2122+4]..src/lr1partial.ml[56,2122+25])
                      Texp_apply
                      expression (src/lr1partial.ml[56,2122+4]..src/lr1partial.ml[56,2122+16])
                        Texp_ident "Dune__exe!.Lr0.restrict"
                      [
                        <arg>
                          Nolabel
                          expression (src/lr1partial.ml[56,2122+17]..src/lr1partial.ml[56,2122+25])
                            Texp_ident "X/497.tokens"
                      ]
                ]
              structure_item (src/lr1partial.ml[75,2944+2]..src/lr1partial.ml[79,3053+5])
                Tstr_type Rec
                [
                  type_declaration node/707 (src/lr1partial.ml[75,2944+2]..src/lr1partial.ml[79,3053+5])
                    ptype_params =
                      []
                    ptype_cstrs =
                      []
                    ptype_kind =
                      Ttype_record
                        [
                          (src/lr1partial.ml[76,2960+6]..src/lr1partial.ml[76,2960+26])
                            Immutable
                            state/708                            core_type (src/lr1partial.ml[76,2960+13]..src/lr1partial.ml[76,2960+25])
                              Ttyp_poly
                              core_type (src/lr1partial.ml[76,2960+13]..src/lr1partial.ml[76,2960+25])
                                Ttyp_constr "Dune__exe!.Lr0.lr1state"
                                []
                          (src/lr1partial.ml[77,2987+6]..src/lr1partial.ml[77,2987+41])
                            Immutable
                            ancestor/720                            core_type (src/lr1partial.ml[77,2987+16]..src/lr1partial.ml[77,2987+40])
                              Ttyp_poly
                              core_type (src/lr1partial.ml[77,2987+16]..src/lr1partial.ml[77,2987+40])
                                Ttyp_constr "option/10!"
                                [
                                  core_type (src/lr1partial.ml[77,2987+17]..src/lr1partial.ml[77,2987+32])
                                    Ttyp_tuple
                                    [
                                      core_type (src/lr1partial.ml[77,2987+17]..src/lr1partial.ml[77,2987+25])
                                        Ttyp_constr "Dune__exe!.Grammar.Symbol.t"
                                        []
                                      core_type (src/lr1partial.ml[77,2987+28]..src/lr1partial.ml[77,2987+32])
                                        Ttyp_constr "node/707"
                                        []
                                    ]
                                ]
                          (src/lr1partial.ml[78,3029+6]..src/lr1partial.ml[78,3029+23])
                            Immutable
                            shadow/721                            core_type (src/lr1partial.ml[78,3029+14]..src/lr1partial.ml[78,3029+22])
                              Ttyp_poly
                              core_type (src/lr1partial.ml[78,3029+14]..src/lr1partial.ml[78,3029+22])
                                Ttyp_constr "Dune__exe!.Lr1.node"
                                []
                        ]
                    ptype_private = Public
                    ptype_manifest =
                      None
                ]
              structure_item (src/lr1partial.ml[83,3132+2]..src/lr1partial.ml[84,3161+18])
                Tstr_value Nonrec
                [
                  <def>
                    pattern (src/lr1partial.ml[83,3132+6]..src/lr1partial.ml[83,3132+11])
                      extra
                        Tpat_extra_constraint
                        core_type (src/lr1partial.ml[83,3132+14]..src/lr1partial.ml[83,3132+26])
                          Ttyp_constr "Stdlib!.Queue.t"
                          [
                            core_type (src/lr1partial.ml[83,3132+14]..src/lr1partial.ml[83,3132+18])
                              Ttyp_constr "node/707"
                              []
                          ]
                      Tpat_alias "queue/754"
                      pattern (src/lr1partial.ml[83,3132+6]..src/lr1partial.ml[83,3132+11])
                        Tpat_any
                    expression (src/lr1partial.ml[84,3161+4]..src/lr1partial.ml[84,3161+18])
                      extra
                        Texp_constraint
                        core_type (src/lr1partial.ml[83,3132+14]..src/lr1partial.ml[83,3132+26])
                          Ttyp_constr "Stdlib!.Queue.t"
                          [
                            core_type (src/lr1partial.ml[83,3132+14]..src/lr1partial.ml[83,3132+18])
                              Ttyp_constr "node/707"
                              []
                          ]
                      Texp_apply
                      expression (src/lr1partial.ml[84,3161+4]..src/lr1partial.ml[84,3161+16])
                        Texp_ident "Stdlib!.Queue.create"
                      [
                        <arg>
                          Nolabel
                          expression (src/lr1partial.ml[84,3161+16]..src/lr1partial.ml[84,3161+18])
                            Texp_construct "()"
                            []
                      ]
                ]
              structure_item (src/lr1partial.ml[88,3240+2]..src/lr1partial.ml[89,3270+23])
                Tstr_value Nonrec
                [
                  <def>
                    pattern (src/lr1partial.ml[88,3240+6]..src/lr1partial.ml[88,3240+9])
                      extra
                        Tpat_extra_constraint
                        core_type (src/lr1partial.ml[88,3240+12]..src/lr1partial.ml[88,3240+27])
                          Ttyp_constr "array/8!"
                          [
                            core_type (src/lr1partial.ml[88,3240+12]..src/lr1partial.ml[88,3240+21])
                              Ttyp_constr "list/9!"
                              [
                                core_type (src/lr1partial.ml[88,3240+12]..src/lr1partial.ml[88,3240+16])
                                  Ttyp_constr "node/707"
                                  []
                              ]
                          ]
                      Tpat_alias "map/776"
                      pattern (src/lr1partial.ml[88,3240+6]..src/lr1partial.ml[88,3240+9])
                        Tpat_any
                    expression (src/lr1partial.ml[89,3270+4]..src/lr1partial.ml[89,3270+23])
                      extra
                        Texp_constraint
                        core_type (src/lr1partial.ml[88,3240+12]..src/lr1partial.ml[88,3240+27])
                          Ttyp_constr "array/8!"
                          [
                            core_type (src/lr1partial.ml[88,3240+12]..src/lr1partial.ml[88,3240+21])
                              Ttyp_constr "list/9!"
                              [
                                core_type (src/lr1partial.ml[88,3240+12]..src/lr1partial.ml[88,3240+16])
                                  Ttyp_constr "node/707"
                                  []
                              ]
                          ]
                      Texp_apply
                      expression (src/lr1partial.ml[89,3270+4]..src/lr1partial.ml[89,3270+14])
                        Texp_ident "Stdlib!.Array.make"
                      [
                        <arg>
                          Nolabel
                          expression (src/lr1partial.ml[89,3270+15]..src/lr1partial.ml[89,3270+20])
                            Texp_ident "Dune__exe!.Lr0.n"
                        <arg>
                          Nolabel
                          expression (src/lr1partial.ml[89,3270+21]..src/lr1partial.ml[89,3270+23])
                            Texp_construct "[]"
                            []
                      ]
                ]
              structure_item (src/lr1partial.ml[94,3408+2]..src/lr1partial.ml[94,3408+37])
                Tstr_exception
                type_exception
                  ptyext_constructor =
                    extension_constructor (src/lr1partial.ml[94,3408+2]..src/lr1partial.ml[94,3408+37])
                      pext_name = "Goal/825"
                      pext_kind =
                        Text_decl
                          [
                            core_type (src/lr1partial.ml[94,3408+20]..src/lr1partial.ml[94,3408+24])
                              Ttyp_constr "node/707"
                              []
                            core_type (src/lr1partial.ml[94,3408+27]..src/lr1partial.ml[94,3408+37])
                              Ttyp_constr "Dune__exe!.Grammar.Terminal.t"
                              []
                          ]
                          None
              structure_item (src/lr1partial.ml[96,3447+2]..src/lr1partial.ml[174,6445+7])
                Tstr_value Nonrec
                [
                  <def>
                    pattern (src/lr1partial.ml[96,3447+6]..src/lr1partial.ml[96,3447+13])
                      Tpat_var "explore/855"
                    expression (src/lr1partial.ml[96,3447+14]..src/lr1partial.ml[174,6445+7]) ghost
                      Texp_function
                      Nolabel
                      [
                        <case>
                          pattern (src/lr1partial.ml[96,3447+14]..src/lr1partial.ml[96,3447+22])
                            Tpat_var "ancestor/857"
                          expression (src/lr1partial.ml[96,3447+23]..src/lr1partial.ml[174,6445+7]) ghost
                            Texp_function
                            Nolabel
                            [
                              <case>
                                pattern (src/lr1partial.ml[96,3447+23]..src/lr1partial.ml[96,3447+29])
                                  Tpat_var "shadow/858"
                                expression (src/lr1partial.ml[96,3447+30]..src/lr1partial.ml[174,6445+7]) ghost
                                  Texp_function
                                  Nolabel
                                  [
                                    <case>
                                      pattern (src/lr1partial.ml[96,3447+31]..src/lr1partial.ml[96,3447+36])
                                        extra
                                          Tpat_extra_constraint
                                          core_type (src/lr1partial.ml[96,3447+39]..src/lr1partial.ml[96,3447+51])
                                            Ttyp_constr "Dune__exe!.Lr0.lr1state"
                                            []
                                        Tpat_alias "state/859"
                                        pattern (src/lr1partial.ml[96,3447+31]..src/lr1partial.ml[96,3447+36])
                                          Tpat_any
                                      expression (src/lr1partial.ml[100,3577+4]..src/lr1partial.ml[174,6445+7])
                                        extra
                                          Texp_constraint
                                          core_type (src/lr1partial.ml[96,3447+55]..src/lr1partial.ml[96,3447+59])
                                            Ttyp_constr "unit/6!"
                                            []
                                        Texp_let Nonrec
                                        [
                                          <def>
                                            pattern (src/lr1partial.ml[100,3577+8]..src/lr1partial.ml[100,3577+9])
                                              Tpat_var "k/860"
                                            expression (src/lr1partial.ml[100,3577+12]..src/lr1partial.ml[100,3577+26])
                                              Texp_apply
                                              expression (src/lr1partial.ml[100,3577+12]..src/lr1partial.ml[100,3577+20])
                                                Texp_ident "Dune__exe!.Lr0.core"
                                              [
                                                <arg>
                                                  Nolabel
                                                  expression (src/lr1partial.ml[100,3577+21]..src/lr1partial.ml[100,3577+26])
                                                    Texp_ident "state/859"
                                              ]
                                        ]
                                        expression (src/lr1partial.ml[101,3607+4]..src/lr1partial.ml[174,6445+7])
                                          Texp_sequence
                                          expression (src/lr1partial.ml[101,3607+4]..src/lr1partial.ml[101,3607+22])
                                            Texp_assert                                            expression (src/lr1partial.ml[101,3607+11]..src/lr1partial.ml[101,3607+22])
                                              Texp_apply
                                              expression (src/lr1partial.ml[101,3607+14]..src/lr1partial.ml[101,3607+15])
                                                Texp_ident "Stdlib!.<"
                                              [
                                                <arg>
                                                  Nolabel
                                                  expression (src/lr1partial.ml[101,3607+12]..src/lr1partial.ml[101,3607+13])
                                                    Texp_ident "k/860"
                                                <arg>
                                                  Nolabel
                                                  expression (src/lr1partial.ml[101,3607+16]..src/lr1partial.ml[101,3607+21])
                                                    Texp_ident "Dune__exe!.Lr0.n"
                                              ]
                                          expression (src/lr1partial.ml[102,3631+4]..src/lr1partial.ml[174,6445+7])
                                            Texp_let Nonrec
                                            [
                                              <def>
                                                pattern (src/lr1partial.ml[102,3631+8]..src/lr1partial.ml[102,3631+15])
                                                  Tpat_var "similar/861"
                                                expression (src/lr1partial.ml[102,3631+18]..src/lr1partial.ml[102,3631+25])
                                                  Texp_apply
                                                  expression (src/lr1partial.ml[102,3631+18]..src/lr1partial.ml[102,3631+25]) ghost
                                                    Texp_ident "Stdlib!.Array.get"
                                                  [
                                                    <arg>
                                                      Nolabel
                                                      expression (src/lr1partial.ml[102,3631+18]..src/lr1partial.ml[102,3631+21])
                                                        Texp_ident "map/776"
                                                    <arg>
                                                      Nolabel
                                                      expression (src/lr1partial.ml[102,3631+23]..src/lr1partial.ml[102,3631+24])
                                                        Texp_ident "k/860"
                                                  ]
                                            ]
                                            expression (src/lr1partial.ml[113,4199+4]..src/lr1partial.ml[174,6445+7])
                                              Texp_ifthenelse
                                              expression (src/lr1partial.ml[113,4199+7]..src/lr1partial.ml[115,4294+14])
                                                Texp_apply
                                                expression (src/lr1partial.ml[113,4199+7]..src/lr1partial.ml[113,4199+10])
                                                  Texp_ident "Stdlib!.not"
                                                [
                                                  <arg>
                                                    Nolabel
                                                    expression (src/lr1partial.ml[113,4199+11]..src/lr1partial.ml[115,4294+14])
                                                      Texp_apply
                                                      expression (src/lr1partial.ml[113,4199+12]..src/lr1partial.ml[113,4199+23])
                                                        Texp_ident "Stdlib!.List.exists"
                                                      [
                                                        <arg>
                                                          Nolabel
                                                          expression (src/lr1partial.ml[113,4199+24]..src/lr1partial.ml[115,4294+5])
                                                            Texp_function
                                                            Nolabel
                                                            [
                                                              <case>
                                                                pattern (src/lr1partial.ml[113,4199+29]..src/lr1partial.ml[113,4199+33])
                                                                  Tpat_var "node/928"
                                                                expression (src/lr1partial.ml[114,4236+6]..src/lr1partial.ml[114,4236+57])
                                                                  Texp_apply
                                                                  expression (src/lr1partial.ml[114,4236+33]..src/lr1partial.ml[114,4236+35])
                                                                    Texp_ident "Stdlib!.&&"
                                                                  [
                                                                    <arg>
                                                                      Nolabel
                                                                      expression (src/lr1partial.ml[114,4236+6]..src/lr1partial.ml[114,4236+32])
                                                                        Texp_apply
                                                                        expression (src/lr1partial.ml[114,4236+6]..src/lr1partial.ml[114,4236+15])
                                                                          Texp_ident "Dune__exe!.Lr0.equal"
                                                                        [
                                                                          <arg>
                                                                            Nolabel
                                                                            expression (src/lr1partial.ml[114,4236+16]..src/lr1partial.ml[114,4236+21])
                                                                              Texp_ident "state/859"
                                                                          <arg>
                                                                            Nolabel
                                                                            expression (src/lr1partial.ml[114,4236+22]..src/lr1partial.ml[114,4236+32])
                                                                              Texp_field
                                                                              expression (src/lr1partial.ml[114,4236+22]..src/lr1partial.ml[114,4236+26])
                                                                                Texp_ident "node/928"
                                                                              "state"
                                                                        ]
                                                                    <arg>
                                                                      Nolabel
                                                                      expression (src/lr1partial.ml[114,4236+36]..src/lr1partial.ml[114,4236+57])
                                                                        Texp_apply
                                                                        expression (src/lr1partial.ml[114,4236+43]..src/lr1partial.ml[114,4236+45])
                                                                          Texp_ident "Stdlib!.=="
                                                                        [
                                                                          <arg>
                                                                            Nolabel
                                                                            expression (src/lr1partial.ml[114,4236+36]..src/lr1partial.ml[114,4236+42])
                                                                              Texp_ident "shadow/858"
                                                                          <arg>
                                                                            Nolabel
                                                                            expression (src/lr1partial.ml[114,4236+46]..src/lr1partial.ml[114,4236+57])
                                                                              Texp_field
                                                                              expression (src/lr1partial.ml[114,4236+46]..src/lr1partial.ml[114,4236+50])
                                                                                Texp_ident "node/928"
                                                                              "shadow"
                                                                        ]
                                                                  ]
                                                            ]
                                                        <arg>
                                                          Nolabel
                                                          expression (src/lr1partial.ml[115,4294+6]..src/lr1partial.ml[115,4294+13])
                                                            Texp_ident "similar/861"
                                                      ]
                                                ]
                                              expression (src/lr1partial.ml[115,4294+20]..src/lr1partial.ml[174,6445+7])
                                                Texp_let Nonrec
                                                [
                                                  <def>
                                                    pattern (src/lr1partial.ml[119,4364+10]..src/lr1partial.ml[119,4364+14])
                                                      Tpat_var "node/929"
                                                    expression (src/lr1partial.ml[119,4364+17]..src/lr1partial.ml[123,4460+7])
                                                      Texp_record
                                                        fields =
                                                          [
                                                            "state"
                                                              expression (src/lr1partial.ml[120,4383+16]..src/lr1partial.ml[120,4383+21])
                                                                Texp_ident "state/859"
                                                            "ancestor"
                                                              expression (src/lr1partial.ml[121,4406+19]..src/lr1partial.ml[121,4406+27])
                                                                Texp_ident "ancestor/857"
                                                            "shadow"
                                                              expression (src/lr1partial.ml[122,4435+17]..src/lr1partial.ml[122,4435+23])
                                                                Texp_ident "shadow/858"
                                                          ]
                                                        representation =
                                                          Record_regular
                                                        extended_expression =
                                                          None
                                                ]
                                                expression (src/lr1partial.ml[125,4472+6]..src/lr1partial.ml[172,6411+32])
                                                  Texp_sequence
                                                  expression (src/lr1partial.ml[125,4472+6]..src/lr1partial.ml[125,4472+32])
                                                    Texp_apply
                                                    expression (src/lr1partial.ml[125,4472+6]..src/lr1partial.ml[125,4472+32]) ghost
                                                      Texp_ident "Stdlib!.Array.set"
                                                    [
                                                      <arg>
                                                        Nolabel
                                                        expression (src/lr1partial.ml[125,4472+6]..src/lr1partial.ml[125,4472+9])
                                                          Texp_ident "map/776"
                                                      <arg>
                                                        Nolabel
                                                        expression (src/lr1partial.ml[125,4472+11]..src/lr1partial.ml[125,4472+12])
                                                          Texp_ident "k/860"
                                                      <arg>
                                                        Nolabel
                                                        expression (src/lr1partial.ml[125,4472+17]..src/lr1partial.ml[125,4472+32])
                                                          Texp_construct "::"
                                                          [
                                                            expression (src/lr1partial.ml[125,4472+17]..src/lr1partial.ml[125,4472+21])
                                                              Texp_ident "node/929"
                                                            expression (src/lr1partial.ml[125,4472+25]..src/lr1partial.ml[125,4472+32])
                                                              Texp_ident "similar/861"
                                                          ]
                                                    ]
                                                  expression (src/lr1partial.ml[126,4506+6]..src/lr1partial.ml[172,6411+32])
                                                    Texp_sequence
                                                    expression (src/lr1partial.ml[126,4506+6]..src/lr1partial.ml[126,4506+26])
                                                      Texp_apply
                                                      expression (src/lr1partial.ml[126,4506+6]..src/lr1partial.ml[126,4506+15])
                                                        Texp_ident "Stdlib!.Queue.add"
                                                      [
                                                        <arg>
                                                          Nolabel
                                                          expression (src/lr1partial.ml[126,4506+16]..src/lr1partial.ml[126,4506+20])
                                                            Texp_ident "node/929"
                                                        <arg>
                                                          Nolabel
                                                          expression (src/lr1partial.ml[126,4506+21]..src/lr1partial.ml[126,4506+26])
                                                            Texp_ident "queue/754"
                                                      ]
                                                    expression (src/lr1partial.ml[135,4941+6]..src/lr1partial.ml[172,6411+32])
                                                      Texp_ifthenelse
                                                      expression (src/lr1partial.ml[135,4941+9]..src/lr1partial.ml[135,4941+25])
                                                        Texp_apply
                                                        expression (src/lr1partial.ml[135,4941+16]..src/lr1partial.ml[135,4941+18])
                                                          Texp_ident "Stdlib!.=="
                                                        [
                                                          <arg>
                                                            Nolabel
                                                            expression (src/lr1partial.ml[135,4941+9]..src/lr1partial.ml[135,4941+15])
                                                              Texp_ident "shadow/858"
                                                          <arg>
                                                            Nolabel
                                                            expression (src/lr1partial.ml[135,4941+19]..src/lr1partial.ml[135,4941+25])
                                                              Texp_ident "X/497.goal"
                                                        ]
                                                      expression (src/lr1partial.ml[136,4972+8]..src/lr1partial.ml[172,6411+32])
                                                        Texp_let Nonrec
                                                        [
                                                          <def>
                                                            pattern (src/lr1partial.ml[136,4972+12]..src/lr1partial.ml[136,4972+22])
                                                              Tpat_var "can_reduce/930"
                                                            expression (src/lr1partial.ml[137,4997+10]..src/lr1partial.ml[137,4997+31])
                                                              Texp_apply
                                                              expression (src/lr1partial.ml[137,4997+10]..src/lr1partial.ml[137,4997+13])
                                                                Texp_ident "Stdlib!.ref"
                                                              [
                                                                <arg>
                                                                  Nolabel
                                                                  expression (src/lr1partial.ml[137,4997+14]..src/lr1partial.ml[137,4997+31])
                                                                    Texp_ident "Dune__exe!.Grammar.TerminalSet.empty"
                                                              ]
                                                        ]
                                                        expression (src/lr1partial.ml[138,5032+8]..src/lr1partial.ml[172,6411+32])
                                                          Texp_let Nonrec
                                                          [
                                                            <def>
                                                              pattern (src/lr1partial.ml[138,5032+12]..src/lr1partial.ml[138,5032+23])
                                                                extra
                                                                  Tpat_extra_constraint
                                                                  core_type (src/lr1partial.ml[138,5032+26]..src/lr1partial.ml[138,5032+61])
                                                                    Ttyp_constr "Dune__exe!.Grammar.TerminalMap.t"
                                                                    [
                                                                      core_type (src/lr1partial.ml[138,5032+26]..src/lr1partial.ml[138,5032+47])
                                                                        Ttyp_constr "list/9!"
                                                                        [
                                                                          core_type (src/lr1partial.ml[138,5032+26]..src/lr1partial.ml[138,5032+42])
                                                                            Ttyp_constr "Dune__exe!.Grammar.Production.index"
                                                                            []
                                                                        ]
                                                                    ]
                                                                Tpat_alias "reductions1/998"
                                                                pattern (src/lr1partial.ml[138,5032+12]..src/lr1partial.ml[138,5032+23])
                                                                  Tpat_any
                                                              expression (src/lr1partial.ml[139,5096+10]..src/lr1partial.ml[139,5096+31])
                                                                extra
                                                                  Texp_constraint
                                                                  core_type (src/lr1partial.ml[138,5032+26]..src/lr1partial.ml[138,5032+61])
                                                                    Ttyp_constr "Dune__exe!.Grammar.TerminalMap.t"
                                                                    [
                                                                      core_type (src/lr1partial.ml[138,5032+26]..src/lr1partial.ml[138,5032+47])
                                                                        Ttyp_constr "list/9!"
                                                                        [
                                                                          core_type (src/lr1partial.ml[138,5032+26]..src/lr1partial.ml[138,5032+42])
                                                                            Ttyp_constr "Dune__exe!.Grammar.Production.index"
                                                                            []
                                                                        ]
                                                                    ]
                                                                Texp_apply
                                                                expression (src/lr1partial.ml[139,5096+10]..src/lr1partial.ml[139,5096+24])
                                                                  Texp_ident "Dune__exe!.Lr1.reductions"
                                                                [
                                                                  <arg>
                                                                    Nolabel
                                                                    expression (src/lr1partial.ml[139,5096+25]..src/lr1partial.ml[139,5096+31])
                                                                      Texp_ident "shadow/858"
                                                                ]
                                                          ]
                                                          expression (src/lr1partial.ml[140,5131+8]..src/lr1partial.ml[172,6411+32])
                                                            Texp_apply
                                                            expression (src/lr1partial.ml[140,5131+8]..src/lr1partial.ml[140,5131+17])
                                                              Texp_ident "Stdlib!.List.iter"
                                                            [
                                                              <arg>
                                                                Nolabel
                                                                expression (src/lr1partial.ml[140,5131+18]..src/lr1partial.ml[172,6411+9])
                                                                  Texp_function
                                                                  Nolabel
                                                                  [
                                                                    <case>
                                                                      pattern (src/lr1partial.ml[140,5131+23]..src/lr1partial.ml[140,5131+35])
                                                                        Tpat_tuple
                                                                        [
                                                                          pattern (src/lr1partial.ml[140,5131+24]..src/lr1partial.ml[140,5131+28])
                                                                            Tpat_var "toks/1032"
                                                                          pattern (src/lr1partial.ml[140,5131+30]..src/lr1partial.ml[140,5131+34])
                                                                            Tpat_var "prod/1033"
                                                                        ]
                                                                      expression (src/lr1partial.ml[141,5170+10]..src/lr1partial.ml[171,6394+16])
                                                                        Texp_apply
                                                                        expression (src/lr1partial.ml[141,5170+10]..src/lr1partial.ml[141,5170+26])
                                                                          Texp_ident "Dune__exe!.Grammar.TerminalSet.iter"
                                                                        [
                                                                          <arg>
                                                                            Nolabel
                                                                            expression (src/lr1partial.ml[141,5170+27]..src/lr1partial.ml[171,6394+11])
                                                                              Texp_function
                                                                              Nolabel
                                                                              [
                                                                                <case>
                                                                                  pattern (src/lr1partial.ml[141,5170+32]..src/lr1partial.ml[141,5170+35])
                                                                                    Tpat_var "tok/1034"
                                                                                  expression (src/lr1partial.ml[150,5548+12]..src/lr1partial.ml[169,6355+37])
                                                                                    Texp_ifthenelse
                                                                                    expression (src/lr1partial.ml[150,5548+15]..src/lr1partial.ml[150,5548+65])
                                                                                      Texp_apply
                                                                                      expression (src/lr1partial.ml[150,5548+15]..src/lr1partial.ml[150,5548+23])
                                                                                        Texp_ident "Stdlib!.List.mem"
                                                                                      [
                                                                                        <arg>
                                                                                          Nolabel
                                                                                          expression (src/lr1partial.ml[150,5548+24]..src/lr1partial.ml[150,5548+28])
                                                                                            Texp_ident "prod/1033"
                                                                                        <arg>
                                                                                          Nolabel
                                                                                          expression (src/lr1partial.ml[150,5548+29]..src/lr1partial.ml[150,5548+65])
                                                                                            Texp_apply
                                                                                            expression (src/lr1partial.ml[150,5548+30]..src/lr1partial.ml[150,5548+48])
                                                                                              Texp_ident "Dune__exe!.Grammar.TerminalMap.lookup"
                                                                                            [
                                                                                              <arg>
                                                                                                Nolabel
                                                                                                expression (src/lr1partial.ml[150,5548+49]..src/lr1partial.ml[150,5548+52])
                                                                                                  Texp_ident "tok/1034"
                                                                                              <arg>
                                                                                                Nolabel
                                                                                                expression (src/lr1partial.ml[150,5548+53]..src/lr1partial.ml[150,5548+64])
                                                                                                  Texp_ident "reductions1/998"
                                                                                            ]
                                                                                      ]
                                                                                    expression (src/lr1partial.ml[152,5620+14]..src/lr1partial.ml[169,6355+37])
                                                                                      Texp_try
                                                                                      expression (src/lr1partial.ml[153,5638+16]..src/lr1partial.ml[157,5812+40])
                                                                                        Texp_let Nonrec
                                                                                        [
                                                                                          <def>
                                                                                            pattern (src/lr1partial.ml[153,5638+21]..src/lr1partial.ml[153,5638+22])
                                                                                              extra
                                                                                                Tpat_extra_constraint
                                                                                                core_type (src/lr1partial.ml[153,5638+25]..src/lr1partial.ml[153,5638+33])
                                                                                                  Ttyp_constr "Dune__exe!.Lr1.node"
                                                                                                  []
                                                                                              Tpat_any
                                                                                            expression (src/lr1partial.ml[154,5675+18]..src/lr1partial.ml[154,5675+72])
                                                                                              Texp_apply
                                                                                              expression (src/lr1partial.ml[154,5675+18]..src/lr1partial.ml[154,5675+32])
                                                                                                Texp_ident "Dune__exe!.Grammar.SymbolMap.find"
                                                                                              [
                                                                                                <arg>
                                                                                                  Nolabel
                                                                                                  expression (src/lr1partial.ml[154,5675+33]..src/lr1partial.ml[154,5675+47])
                                                                                                    Texp_construct "Symbol.T"
                                                                                                    [
                                                                                                      expression (src/lr1partial.ml[154,5675+43]..src/lr1partial.ml[154,5675+46])
                                                                                                        Texp_ident "tok/1034"
                                                                                                    ]
                                                                                                <arg>
                                                                                                  Nolabel
                                                                                                  expression (src/lr1partial.ml[154,5675+48]..src/lr1partial.ml[154,5675+72])
                                                                                                    Texp_apply
                                                                                                    expression (src/lr1partial.ml[154,5675+49]..src/lr1partial.ml[154,5675+64])
                                                                                                      Texp_ident "Dune__exe!.Lr1.transitions"
                                                                                                    [
                                                                                                      <arg>
                                                                                                        Nolabel
                                                                                                        expression (src/lr1partial.ml[154,5675+65]..src/lr1partial.ml[154,5675+71])
                                                                                                          Texp_ident "shadow/858"
                                                                                                    ]
                                                                                              ]
                                                                                        ]
                                                                                        expression (src/lr1partial.ml[157,5812+16]..src/lr1partial.ml[157,5812+40])
                                                                                          Texp_apply
                                                                                          expression (src/lr1partial.ml[157,5812+16]..src/lr1partial.ml[157,5812+21])
                                                                                            Texp_ident "Stdlib!.raise"
                                                                                          [
                                                                                            <arg>
                                                                                              Nolabel
                                                                                              expression (src/lr1partial.ml[157,5812+22]..src/lr1partial.ml[157,5812+40])
                                                                                                Texp_construct "Goal"
                                                                                                [
                                                                                                  expression (src/lr1partial.ml[157,5812+29]..src/lr1partial.ml[157,5812+33])
                                                                                                    Texp_ident "node/929"
                                                                                                  expression (src/lr1partial.ml[157,5812+35]..src/lr1partial.ml[157,5812+38])
                                                                                                    Texp_ident "tok/1034"
                                                                                                ]
                                                                                          ]
                                                                                      [
                                                                                        <case>
                                                                                          pattern (src/lr1partial.ml[158,5853+19]..src/lr1partial.ml[158,5853+28])
                                                                                            Tpat_construct "Not_found"
                                                                                            []
                                                                                            None
                                                                                          expression (src/lr1partial.ml[159,5885+16]..src/lr1partial.ml[169,6355+37])
                                                                                            Texp_let Nonrec
                                                                                            [
                                                                                              <def>
                                                                                                pattern (src/lr1partial.ml[159,5885+20]..src/lr1partial.ml[159,5885+24])
                                                                                                  Tpat_var "toks/1161"
                                                                                                expression (src/lr1partial.ml[159,5885+27]..src/lr1partial.ml[159,5885+38])
                                                                                                  Texp_apply
                                                                                                  expression (src/lr1partial.ml[159,5885+27]..src/lr1partial.ml[159,5885+28])
                                                                                                    Texp_ident "Stdlib!.!"
                                                                                                  [
                                                                                                    <arg>
                                                                                                      Nolabel
                                                                                                      expression (src/lr1partial.ml[159,5885+28]..src/lr1partial.ml[159,5885+38])
                                                                                                        Texp_ident "can_reduce/930"
                                                                                                  ]
                                                                                            ]
                                                                                            expression (src/lr1partial.ml[163,6105+16]..src/lr1partial.ml[169,6355+37])
                                                                                              Texp_let Nonrec
                                                                                              [
                                                                                                <def>
                                                                                                  pattern (src/lr1partial.ml[163,6105+20]..src/lr1partial.ml[163,6105+25])
                                                                                                    Tpat_var "toks'/1162"
                                                                                                  expression (src/lr1partial.ml[163,6105+28]..src/lr1partial.ml[163,6105+52])
                                                                                                    Texp_apply
                                                                                                    expression (src/lr1partial.ml[163,6105+28]..src/lr1partial.ml[163,6105+43])
                                                                                                      Texp_ident "Dune__exe!.Grammar.TerminalSet.add"
                                                                                                    [
                                                                                                      <arg>
                                                                                                        Nolabel
                                                                                                        expression (src/lr1partial.ml[163,6105+44]..src/lr1partial.ml[163,6105+47])
                                                                                                          Texp_ident "tok/1034"
                                                                                                      <arg>
                                                                                                        Nolabel
                                                                                                        expression (src/lr1partial.ml[163,6105+48]..src/lr1partial.ml[163,6105+52])
                                                                                                          Texp_ident "toks/1161"
                                                                                                    ]
                                                                                              ]
                                                                                              expression (src/lr1partial.ml[164,6161+16]..src/lr1partial.ml[169,6355+37])
                                                                                                Texp_ifthenelse
                                                                                                expression (src/lr1partial.ml[164,6161+19]..src/lr1partial.ml[164,6161+32])
                                                                                                  Texp_apply
                                                                                                  expression (src/lr1partial.ml[164,6161+24]..src/lr1partial.ml[164,6161+26])
                                                                                                    Texp_ident "Stdlib!.=="
                                                                                                  [
                                                                                                    <arg>
                                                                                                      Nolabel
                                                                                                      expression (src/lr1partial.ml[164,6161+19]..src/lr1partial.ml[164,6161+23])
                                                                                                        Texp_ident "toks/1161"
                                                                                                    <arg>
                                                                                                      Nolabel
                                                                                                      expression (src/lr1partial.ml[164,6161+27]..src/lr1partial.ml[164,6161+32])
                                                                                                        Texp_ident "toks'/1162"
                                                                                                  ]
                                                                                                expression (src/lr1partial.ml[166,6247+18]..src/lr1partial.ml[166,6247+42])
                                                                                                  Texp_apply
                                                                                                  expression (src/lr1partial.ml[166,6247+18]..src/lr1partial.ml[166,6247+23])
                                                                                                    Texp_ident "Stdlib!.raise"
                                                                                                  [
                                                                                                    <arg>
                                                                                                      Nolabel
                                                                                                      expression (src/lr1partial.ml[166,6247+24]..src/lr1partial.ml[166,6247+42])
                                                                                                        Texp_construct "Goal"
                                                                                                        [
                                                                                                          expression (src/lr1partial.ml[166,6247+31]..src/lr1partial.ml[166,6247+35])
                                                                                                            Texp_ident "node/929"
                                                                                                          expression (src/lr1partial.ml[166,6247+37]..src/lr1partial.ml[166,6247+40])
                                                                                                            Texp_ident "tok/1034"
                                                                                                        ]
                                                                                                  ]
                                                                                                Some
                                                                                                  expression (src/lr1partial.ml[169,6355+18]..src/lr1partial.ml[169,6355+37])
                                                                                                    Texp_apply
                                                                                                    expression (src/lr1partial.ml[169,6355+29]..src/lr1partial.ml[169,6355+31])
                                                                                                      Texp_ident "Stdlib!.:="
                                                                                                    [
                                                                                                      <arg>
                                                                                                        Nolabel
                                                                                                        expression (src/lr1partial.ml[169,6355+18]..src/lr1partial.ml[169,6355+28])
                                                                                                          Texp_ident "can_reduce/930"
                                                                                                      <arg>
                                                                                                        Nolabel
                                                                                                        expression (src/lr1partial.ml[169,6355+32]..src/lr1partial.ml[169,6355+37])
                                                                                                          Texp_ident "toks'/1162"
                                                                                                    ]
                                                                                      ]
                                                                                    None
                                                                              ]
                                                                          <arg>
                                                                            Nolabel
                                                                            expression (src/lr1partial.ml[171,6394+12]..src/lr1partial.ml[171,6394+16])
                                                                              Texp_ident "toks/1032"
                                                                        ]
                                                                  ]
                                                              <arg>
                                                                Nolabel
                                                                expression (src/lr1partial.ml[172,6411+10]..src/lr1partial.ml[172,6411+32])
                                                                  Texp_apply
                                                                  expression (src/lr1partial.ml[172,6411+11]..src/lr1partial.ml[172,6411+25])
                                                                    Texp_ident "Dune__exe!.Lr0.reductions"
                                                                  [
                                                                    <arg>
                                                                      Nolabel
                                                                      expression (src/lr1partial.ml[172,6411+26]..src/lr1partial.ml[172,6411+31])
                                                                        Texp_ident "state/859"
                                                                  ]
                                                            ]
                                                      None
                                              None
                                  ]
                            ]
                      ]
                ]
              structure_item (src/lr1partial.ml[180,6641+2]..src/lr1partial.ml[216,7853+15])
                Tstr_value Nonrec
                [
                  <def>
                    pattern (src/lr1partial.ml[180,6641+6]..src/lr1partial.ml[180,6641+17])
                      Tpat_tuple
                      [
                        pattern (src/lr1partial.ml[180,6641+6]..src/lr1partial.ml[180,6641+10])
                          Tpat_var "goal/1164"
                        pattern (src/lr1partial.ml[180,6641+12]..src/lr1partial.ml[180,6641+17])
                          Tpat_var "token/1165"
                      ]
                    expression (src/lr1partial.ml[181,6661+4]..src/lr1partial.ml[216,7853+15])
                      Texp_try
                      expression (src/lr1partial.ml[183,6670+6]..src/lr1partial.ml[213,7806+16])
                        Texp_sequence
                        expression (src/lr1partial.ml[183,6670+6]..src/lr1partial.ml[191,6966+17])
                          Texp_apply
                          expression (src/lr1partial.ml[183,6670+6]..src/lr1partial.ml[183,6670+24])
                            Texp_ident "Dune__exe!.Grammar.ProductionMap.iter"
                          [
                            <arg>
                              Nolabel
                              expression (src/lr1partial.ml[183,6670+25]..src/lr1partial.ml[191,6966+7])
                                Texp_function
                                Nolabel
                                [
                                  <case>
                                    pattern (src/lr1partial.ml[183,6670+31]..src/lr1partial.ml[183,6670+35])
                                      extra
                                        Tpat_extra_constraint
                                        core_type (src/lr1partial.ml[183,6670+38]..src/lr1partial.ml[183,6670+54])
                                          Ttyp_constr "Dune__exe!.Grammar.Production.index"
                                          []
                                      Tpat_alias "prod/1234"
                                      pattern (src/lr1partial.ml[183,6670+31]..src/lr1partial.ml[183,6670+35])
                                        Tpat_any
                                    expression (src/lr1partial.ml[183,6670+56]..src/lr1partial.ml[190,6911+54]) ghost
                                      Texp_function
                                      Nolabel
                                      [
                                        <case>
                                          pattern (src/lr1partial.ml[183,6670+57]..src/lr1partial.ml[183,6670+58])
                                            extra
                                              Tpat_extra_constraint
                                              core_type (src/lr1partial.ml[183,6670+61]..src/lr1partial.ml[183,6670+69])
                                                Ttyp_constr "Dune__exe!.Lr0.node"
                                                []
                                            Tpat_alias "k/1235"
                                            pattern (src/lr1partial.ml[183,6670+57]..src/lr1partial.ml[183,6670+58])
                                              Tpat_any
                                          expression (src/lr1partial.ml[184,6744+8]..src/lr1partial.ml[190,6911+54])
                                            Texp_let Nonrec
                                            [
                                              <def>
                                                pattern (src/lr1partial.ml[184,6744+12]..src/lr1partial.ml[184,6744+18])
                                                  Tpat_var "shadow/1236"
                                                expression (src/lr1partial.ml[184,6744+21]..src/lr1partial.ml[187,6843+24])
                                                  Texp_try
                                                  expression (src/lr1partial.ml[185,6769+12]..src/lr1partial.ml[185,6769+45])
                                                    Texp_apply
                                                    expression (src/lr1partial.ml[185,6769+12]..src/lr1partial.ml[185,6769+30])
                                                      Texp_ident "Dune__exe!.Grammar.ProductionMap.find"
                                                    [
                                                      <arg>
                                                        Nolabel
                                                        expression (src/lr1partial.ml[185,6769+31]..src/lr1partial.ml[185,6769+35])
                                                          Texp_ident "prod/1234"
                                                      <arg>
                                                        Nolabel
                                                        expression (src/lr1partial.ml[185,6769+36]..src/lr1partial.ml[185,6769+45])
                                                          Texp_ident "Dune__exe!.Lr1.entry"
                                                    ]
                                                  [
                                                    <case>
                                                      pattern (src/lr1partial.ml[186,6815+15]..src/lr1partial.ml[186,6815+24])
                                                        Tpat_construct "Not_found"
                                                        []
                                                        None
                                                      expression (src/lr1partial.ml[187,6843+12]..src/lr1partial.ml[187,6843+24])
                                                        Texp_assert                                                        expression (src/lr1partial.ml[187,6843+19]..src/lr1partial.ml[187,6843+24])
                                                          Texp_construct "false"
                                                          []
                                                  ]
                                            ]
                                            expression (src/lr1partial.ml[189,6879+8]..src/lr1partial.ml[190,6911+54])
                                              Texp_ifthenelse
                                              expression (src/lr1partial.ml[189,6879+11]..src/lr1partial.ml[189,6879+26])
                                                Texp_apply
                                                expression (src/lr1partial.ml[189,6879+11]..src/lr1partial.ml[189,6879+19])
                                                  Texp_ident "relevant/498"
                                                [
                                                  <arg>
                                                    Nolabel
                                                    expression (src/lr1partial.ml[189,6879+20]..src/lr1partial.ml[189,6879+26])
                                                      Texp_ident "shadow/1236"
                                                ]
                                              expression (src/lr1partial.ml[190,6911+10]..src/lr1partial.ml[190,6911+54])
                                                Texp_apply
                                                expression (src/lr1partial.ml[190,6911+10]..src/lr1partial.ml[190,6911+17])
                                                  Texp_ident "explore/855"
                                                [
                                                  <arg>
                                                    Nolabel
                                                    expression (src/lr1partial.ml[190,6911+18]..src/lr1partial.ml[190,6911+22])
                                                      Texp_construct "None"
                                                      []
                                                  <arg>
                                                    Nolabel
                                                    expression (src/lr1partial.ml[190,6911+23]..src/lr1partial.ml[190,6911+29])
                                                      Texp_ident "shadow/1236"
                                                  <arg>
                                                    Nolabel
                                                    expression (src/lr1partial.ml[190,6911+30]..src/lr1partial.ml[190,6911+54])
                                                      Texp_apply
                                                      expression (src/lr1partial.ml[190,6911+31]..src/lr1partial.ml[190,6911+39])
                                                        Texp_ident "restrict/608"
                                                      [
                                                        <arg>
                                                          Nolabel
                                                          expression (src/lr1partial.ml[190,6911+40]..src/lr1partial.ml[190,6911+53])
                                                            Texp_apply
                                                            expression (src/lr1partial.ml[190,6911+41]..src/lr1partial.ml[190,6911+50])
                                                              Texp_ident "Dune__exe!.Lr0.start"
                                                            [
                                                              <arg>
                                                                Nolabel
                                                                expression (src/lr1partial.ml[190,6911+51]..src/lr1partial.ml[190,6911+52])
                                                                  Texp_ident "k/1235"
                                                            ]
                                                      ]
                                                ]
                                              None
                                      ]
                                ]
                            <arg>
                              Nolabel
                              expression (src/lr1partial.ml[191,6966+8]..src/lr1partial.ml[191,6966+17])
                                Texp_ident "Dune__exe!.Lr0.entry"
                          ]
                        expression (src/lr1partial.ml[193,6986+6]..src/lr1partial.ml[213,7806+16])
                          Texp_sequence
                          expression (src/lr1partial.ml[193,6986+6]..src/lr1partial.ml[205,7498+13])
                            Texp_apply
                            expression (src/lr1partial.ml[193,6986+6]..src/lr1partial.ml[193,6986+16])
                              Texp_ident "Dune__exe!.Misc.qiter"
                            [
                              <arg>
                                Nolabel
                                expression (src/lr1partial.ml[193,6986+17]..src/lr1partial.ml[205,7498+7])
                                  Texp_function
                                  Nolabel
                                  [
                                    <case>
                                      pattern (src/lr1partial.ml[193,6986+22]..src/lr1partial.ml[193,6986+26])
                                        Tpat_var "node/1307"
                                      expression (src/lr1partial.ml[194,7016+8]..src/lr1partial.ml[204,7459+38])
                                        Texp_apply
                                        expression (src/lr1partial.ml[194,7016+8]..src/lr1partial.ml[194,7016+22])
                                          Texp_ident "Dune__exe!.Grammar.SymbolMap.iter"
                                        [
                                          <arg>
                                            Nolabel
                                            expression (src/lr1partial.ml[194,7016+23]..src/lr1partial.ml[204,7459+9])
                                              Texp_function
                                              Nolabel
                                              [
                                                <case>
                                                  pattern (src/lr1partial.ml[194,7016+28]..src/lr1partial.ml[194,7016+34])
                                                    Tpat_var "symbol/1308"
                                                  expression (src/lr1partial.ml[194,7016+35]..src/lr1partial.ml[203,7444+14]) ghost
                                                    Texp_function
                                                    Nolabel
                                                    [
                                                      <case>
                                                        pattern (src/lr1partial.ml[194,7016+35]..src/lr1partial.ml[194,7016+40])
                                                          Tpat_var "state/1309"
                                                        expression (src/lr1partial.ml[195,7060+10]..src/lr1partial.ml[203,7444+14])
                                                          Texp_try
                                                          expression (src/lr1partial.ml[196,7074+12]..src/lr1partial.ml[199,7204+67])
                                                            Texp_let Nonrec
                                                            [
                                                              <def>
                                                                pattern (src/lr1partial.ml[196,7074+16]..src/lr1partial.ml[196,7074+22])
                                                                  Tpat_var "shadow/1310"
                                                                expression (src/lr1partial.ml[197,7099+14]..src/lr1partial.ml[197,7099+65])
                                                                  Texp_apply
                                                                  expression (src/lr1partial.ml[197,7099+14]..src/lr1partial.ml[197,7099+28])
                                                                    Texp_ident "Dune__exe!.Grammar.SymbolMap.find"
                                                                  [
                                                                    <arg>
                                                                      Nolabel
                                                                      expression (src/lr1partial.ml[197,7099+29]..src/lr1partial.ml[197,7099+35])
                                                                        Texp_ident "symbol/1308"
                                                                    <arg>
                                                                      Nolabel
                                                                      expression (src/lr1partial.ml[197,7099+36]..src/lr1partial.ml[197,7099+65])
                                                                        Texp_apply
                                                                        expression (src/lr1partial.ml[197,7099+37]..src/lr1partial.ml[197,7099+52])
                                                                          Texp_ident "Dune__exe!.Lr1.transitions"
                                                                        [
                                                                          <arg>
                                                                            Nolabel
                                                                            expression (src/lr1partial.ml[197,7099+53]..src/lr1partial.ml[197,7099+64])
                                                                              Texp_field
                                                                              expression (src/lr1partial.ml[197,7099+53]..src/lr1partial.ml[197,7099+57])
                                                                                Texp_ident "node/1307"
                                                                              "shadow"
                                                                        ]
                                                                  ]
                                                            ]
                                                            expression (src/lr1partial.ml[198,7168+12]..src/lr1partial.ml[199,7204+67])
                                                              Texp_ifthenelse
                                                              expression (src/lr1partial.ml[198,7168+15]..src/lr1partial.ml[198,7168+30])
                                                                Texp_apply
                                                                expression (src/lr1partial.ml[198,7168+15]..src/lr1partial.ml[198,7168+23])
                                                                  Texp_ident "relevant/498"
                                                                [
                                                                  <arg>
                                                                    Nolabel
                                                                    expression (src/lr1partial.ml[198,7168+24]..src/lr1partial.ml[198,7168+30])
                                                                      Texp_ident "shadow/1310"
                                                                ]
                                                              expression (src/lr1partial.ml[199,7204+14]..src/lr1partial.ml[199,7204+67])
                                                                Texp_apply
                                                                expression (src/lr1partial.ml[199,7204+14]..src/lr1partial.ml[199,7204+21])
                                                                  Texp_ident "explore/855"
                                                                [
                                                                  <arg>
                                                                    Nolabel
                                                                    expression (src/lr1partial.ml[199,7204+22]..src/lr1partial.ml[199,7204+43])
                                                                      Texp_construct "Some"
                                                                      [
                                                                        expression (src/lr1partial.ml[199,7204+28]..src/lr1partial.ml[199,7204+42])
                                                                          Texp_tuple
                                                                          [
                                                                            expression (src/lr1partial.ml[199,7204+29]..src/lr1partial.ml[199,7204+35])
                                                                              Texp_ident "symbol/1308"
                                                                            expression (src/lr1partial.ml[199,7204+37]..src/lr1partial.ml[199,7204+41])
                                                                              Texp_ident "node/1307"
                                                                          ]
                                                                      ]
                                                                  <arg>
                                                                    Nolabel
                                                                    expression (src/lr1partial.ml[199,7204+44]..src/lr1partial.ml[199,7204+50])
                                                                      Texp_ident "shadow/1310"
                                                                  <arg>
                                                                    Nolabel
                                                                    expression (src/lr1partial.ml[199,7204+51]..src/lr1partial.ml[199,7204+67])
                                                                      Texp_apply
                                                                      expression (src/lr1partial.ml[199,7204+52]..src/lr1partial.ml[199,7204+60])
                                                                        Texp_ident "restrict/608"
                                                                      [
                                                                        <arg>
                                                                          Nolabel
                                                                          expression (src/lr1partial.ml[199,7204+61]..src/lr1partial.ml[199,7204+66])
                                                                            Texp_ident "state/1309"
                                                                      ]
                                                                ]
                                                              None
                                                          [
                                                            <case>
                                                              pattern (src/lr1partial.ml[200,7272+15]..src/lr1partial.ml[200,7272+24])
                                                                Tpat_construct "Not_found"
                                                                []
                                                                None
                                                              expression (src/lr1partial.ml[203,7444+12]..src/lr1partial.ml[203,7444+14])
                                                                Texp_construct "()"
                                                                []
                                                          ]
                                                    ]
                                              ]
                                          <arg>
                                            Nolabel
                                            expression (src/lr1partial.ml[204,7459+10]..src/lr1partial.ml[204,7459+38])
                                              Texp_apply
                                              expression (src/lr1partial.ml[204,7459+11]..src/lr1partial.ml[204,7459+26])
                                                Texp_ident "Dune__exe!.Lr0.transitions"
                                              [
                                                <arg>
                                                  Nolabel
                                                  expression (src/lr1partial.ml[204,7459+27]..src/lr1partial.ml[204,7459+37])
                                                    Texp_field
                                                    expression (src/lr1partial.ml[204,7459+27]..src/lr1partial.ml[204,7459+31])
                                                      Texp_ident "node/1307"
                                                    "state"
                                              ]
                                        ]
                                  ]
                              <arg>
                                Nolabel
                                expression (src/lr1partial.ml[205,7498+8]..src/lr1partial.ml[205,7498+13])
                                  Texp_ident "queue/754"
                            ]
                          expression (src/lr1partial.ml[213,7806+6]..src/lr1partial.ml[213,7806+16])
                            Texp_apply
                            expression (src/lr1partial.ml[213,7806+6]..src/lr1partial.ml[213,7806+11])
                              Texp_ident "Stdlib!.raise"
                            [
                              <arg>
                                Nolabel
                                expression (src/lr1partial.ml[213,7806+12]..src/lr1partial.ml[213,7806+16])
                                  Texp_construct "Oops"
                                  []
                            ]
                      [
                        <case>
                          pattern (src/lr1partial.ml[215,7824+9]..src/lr1partial.ml[215,7824+25])
                            Tpat_construct "Goal"
                            [
                              pattern (src/lr1partial.ml[215,7824+15]..src/lr1partial.ml[215,7824+19])
                                Tpat_var "node/1311"
                              pattern (src/lr1partial.ml[215,7824+21]..src/lr1partial.ml[215,7824+24])
                                Tpat_var "tok/1312"
                            ]
                            None
                          expression (src/lr1partial.ml[216,7853+6]..src/lr1partial.ml[216,7853+15])
                            Texp_tuple
                            [
                              expression (src/lr1partial.ml[216,7853+6]..src/lr1partial.ml[216,7853+10])
                                Texp_ident "node/1311"
                              expression (src/lr1partial.ml[216,7853+12]..src/lr1partial.ml[216,7853+15])
                                Texp_ident "tok/1312"
                            ]
                      ]
                ]
              structure_item (src/lr1partial.ml[221,7978+2]..src/lr1partial.ml[230,8212+18])
                Tstr_value Nonrec
                [
                  <def>
                    pattern (src/lr1partial.ml[221,7978+6]..src/lr1partial.ml[221,7978+18])
                      Tpat_tuple
                      [
                        pattern (src/lr1partial.ml[221,7978+6]..src/lr1partial.ml[221,7978+12])
                          Tpat_var "source/1313"
                        pattern (src/lr1partial.ml[221,7978+14]..src/lr1partial.ml[221,7978+18])
                          Tpat_var "path/1314"
                      ]
                    expression (src/lr1partial.ml[223,8000+4]..src/lr1partial.ml[230,8212+18])
                      Texp_let Rec
                      [
                        <def>
                          pattern (src/lr1partial.ml[223,8000+12]..src/lr1partial.ml[223,8000+18])
                            Tpat_var "follow/1315"
                          expression (src/lr1partial.ml[223,8000+19]..src/lr1partial.ml[228,8166+38]) ghost
                            Texp_function
                            Nolabel
                            [
                              <case>
                                pattern (src/lr1partial.ml[223,8000+19]..src/lr1partial.ml[223,8000+23])
                                  Tpat_var "path/1316"
                                expression (src/lr1partial.ml[223,8000+24]..src/lr1partial.ml[228,8166+38]) ghost
                                  Texp_function
                                  Nolabel
                                  [
                                    <case>
                                      pattern (src/lr1partial.ml[223,8000+24]..src/lr1partial.ml[223,8000+28])
                                        Tpat_var "node/1317"
                                      expression (src/lr1partial.ml[224,8031+6]..src/lr1partial.ml[228,8166+38])
                                        Texp_match
                                        expression (src/lr1partial.ml[224,8031+12]..src/lr1partial.ml[224,8031+25])
                                          Texp_field
                                          expression (src/lr1partial.ml[224,8031+12]..src/lr1partial.ml[224,8031+16])
                                            Texp_ident "node/1317"
                                          "ancestor"
                                        [
                                          <case>
                                            pattern (src/lr1partial.ml[225,8062+8]..src/lr1partial.ml[225,8062+12])
                                              Tpat_value
                                              pattern (src/lr1partial.ml[225,8062+8]..src/lr1partial.ml[225,8062+12])
                                                Tpat_construct "None"
                                                []
                                                None
                                            expression (src/lr1partial.ml[226,8078+10]..src/lr1partial.ml[226,8078+56])
                                              Texp_tuple
                                              [
                                                expression (src/lr1partial.ml[226,8078+10]..src/lr1partial.ml[226,8078+36])
                                                  Texp_apply
                                                  expression (src/lr1partial.ml[226,8078+10]..src/lr1partial.ml[226,8078+24])
                                                    Texp_ident "Dune__exe!.Lr1.start2item"
                                                  [
                                                    <arg>
                                                      Nolabel
                                                      expression (src/lr1partial.ml[226,8078+25]..src/lr1partial.ml[226,8078+36])
                                                        Texp_field
                                                        expression (src/lr1partial.ml[226,8078+25]..src/lr1partial.ml[226,8078+29])
                                                          Texp_ident "node/1317"
                                                        "shadow"
                                                  ]
                                                expression (src/lr1partial.ml[226,8078+38]..src/lr1partial.ml[226,8078+56])
                                                  Texp_apply
                                                  expression (src/lr1partial.ml[226,8078+38]..src/lr1partial.ml[226,8078+51])
                                                    Texp_ident "Stdlib!.Array.of_list"
                                                  [
                                                    <arg>
                                                      Nolabel
                                                      expression (src/lr1partial.ml[226,8078+52]..src/lr1partial.ml[226,8078+56])
                                                        Texp_ident "path/1316"
                                                  ]
                                              ]
                                          <case>
                                            pattern (src/lr1partial.ml[227,8135+8]..src/lr1partial.ml[227,8135+27])
                                              Tpat_value
                                              pattern (src/lr1partial.ml[227,8135+8]..src/lr1partial.ml[227,8135+27])
                                                Tpat_construct "Some"
                                                [
                                                  pattern (src/lr1partial.ml[227,8135+13]..src/lr1partial.ml[227,8135+27])
                                                    Tpat_tuple
                                                    [
                                                      pattern (src/lr1partial.ml[227,8135+14]..src/lr1partial.ml[227,8135+20])
                                                        Tpat_var "symbol/1318"
                                                      pattern (src/lr1partial.ml[227,8135+22]..src/lr1partial.ml[227,8135+26])
                                                        Tpat_var "node/1319"
                                                    ]
                                                ]
                                                None
                                            expression (src/lr1partial.ml[228,8166+10]..src/lr1partial.ml[228,8166+38])
                                              Texp_apply
                                              expression (src/lr1partial.ml[228,8166+10]..src/lr1partial.ml[228,8166+16])
                                                Texp_ident "follow/1315"
                                              [
                                                <arg>
                                                  Nolabel
                                                  expression (src/lr1partial.ml[228,8166+17]..src/lr1partial.ml[228,8166+33])
                                                    Texp_construct "::"
                                                    [
                                                      expression (src/lr1partial.ml[228,8166+18]..src/lr1partial.ml[228,8166+24])
                                                        Texp_ident "symbol/1318"
                                                      expression (src/lr1partial.ml[228,8166+28]..src/lr1partial.ml[228,8166+32])
                                                        Texp_ident "path/1316"
                                                    ]
                                                <arg>
                                                  Nolabel
                                                  expression (src/lr1partial.ml[228,8166+34]..src/lr1partial.ml[228,8166+38])
                                                    Texp_ident "node/1319"
                                              ]
                                        ]
                                  ]
                            ]
                      ]
                      expression (src/lr1partial.ml[230,8212+4]..src/lr1partial.ml[230,8212+18])
                        Texp_apply
                        expression (src/lr1partial.ml[230,8212+4]..src/lr1partial.ml[230,8212+10])
                          Texp_ident "follow/1315"
                        [
                          <arg>
                            Nolabel
                            expression (src/lr1partial.ml[230,8212+11]..src/lr1partial.ml[230,8212+13])
                              Texp_construct "[]"
                              []
                          <arg>
                            Nolabel
                            expression (src/lr1partial.ml[230,8212+14]..src/lr1partial.ml[230,8212+18])
                              Texp_ident "goal/1164"
                        ]
                ]
              structure_item (src/lr1partial.ml[232,8232+2]..src/lr1partial.ml[233,8245+25])
                Tstr_value Nonrec
                [
                  <def>
                    pattern (src/lr1partial.ml[232,8232+6]..src/lr1partial.ml[232,8232+10])
                      Tpat_var "goal/1349"
                    expression (src/lr1partial.ml[233,8245+4]..src/lr1partial.ml[233,8245+25])
                      Texp_apply
                      expression (src/lr1partial.ml[233,8245+4]..src/lr1partial.ml[233,8245+14])
                        Texp_ident "Dune__exe!.Lr0.export"
                      [
                        <arg>
                          Nolabel
                          expression (src/lr1partial.ml[233,8245+15]..src/lr1partial.ml[233,8245+25])
                            Texp_field
                            expression (src/lr1partial.ml[233,8245+15]..src/lr1partial.ml[233,8245+19])
                              Texp_ident "goal/1164"
                            "state"
                      ]
                ]
            ]
]

{<Dune__exe__Lr1partial>
 "Oops"[extension constructor] -> <Dune__exe__Lr1partial.0>;
 "Run"[module] ->
   Abs<Dune__exe__Lr1partial.59>
      (X/497,
       {
        "goal"[value] -> <Dune__exe__Lr1partial.58>;
        "path"[value] -> <Dune__exe__Lr1partial.52>;
        "source"[value] -> <Dune__exe__Lr1partial.51>;
        "token"[value] -> <Dune__exe__Lr1partial.41>;
        });
 }

(seq
  (let
    (Oops/414 =
       (makeblock 248 "Dune__exe__Lr1partial.Oops" (caml_fresh_oo_id 0)))
    (setfield_ptr(root-init) 0 (global Dune__exe__Lr1partial!) Oops/414))
  (let
    (Run/1416 =
       (function X/3833 is_a_functor
         (let
           (X/497 =a X/3833
            relevant/498 =
              (let
                (G/549 =
                   (let
                     (include/3807 =a
                        (let
                          (let/3808 = (field_imm 18 (global Dune__exe__Lr1!)))
                          (field_imm 18 (global Dune__exe__Lr1!)))
                      foreach_outgoing_edge/545 =a (field_mut 0 include/3807)
                      foreach_root/546 =
                        (function f/548 (apply f/548 (field_imm 1 X/497))))
                     (makeblock 0 foreach_outgoing_edge/545 foreach_root/546))
                 M/580 =
                   (apply
                     (let (let/3811 = (field_imm 2 (global Dune__exe__DFS!)))
                       (field_imm 2 (global Dune__exe__DFS!)))
                     (let
                       (let/3809 = (global Dune__exe__Lr1!)
                        let/3810 =a (global Dune__exe__Lr1!))
                       (makeblock 0 (field_mut 8 let/3810)
                         (field_mut 9 let/3810))))
                 D/589 =
                   (let
                     (discover/581 = (function _node/583 : int 0)
                      traverse/584 =
                        (function _source/586 _label/587 _target/588 : int 0))
                     (makeblock 0 discover/581 traverse/584))
                 R/607 =
                   (apply
                     (apply
                       (apply
                         (let
                           (let/3812 = (field_imm 0 (global Dune__exe__DFS!)))
                           (field_imm 0 (global Dune__exe__DFS!)))
                         G/549)
                       (makeblock 0 (field_mut 0 M/580) (field_mut 1 M/580)))
                     D/589))
                (field_imm 1 M/580))
            restrict/608 =
              (apply (field_imm 23 (global Dune__exe__Lr0!))
                (field_imm 0 X/497))
            queue/754 = (apply (field_imm 1 (global Stdlib__Queue!)) 0)
            map/776 =
              (caml_make_vect (field_imm 0 (global Dune__exe__Lr0!)) 0)
            Goal/825 =
              (makeblock 248 "Dune__exe__Lr1partial.Run(X).Goal"
                (caml_fresh_oo_id 0))
            explore/855 =
              (function ancestor/857 shadow/858 state/859 : int
                (let
                  (k/860 =[int]
                     (apply (field_imm 11 (global Dune__exe__Lr0!))
                       state/859))
                  (seq
                    (if (< k/860 (field_imm 0 (global Dune__exe__Lr0!))) 0
                      (raise
                        (makeblock 0 (global Assert_failure/28!)
                          [0: "src/lr1partial.ml" 101 4])))
                    (let (similar/861 = (array.get[addr] map/776 k/860))
                      (if
                        (not
                          (apply (field_imm 33 (global Stdlib__List!))
                            (function node/928 : int
                              (&&
                                (apply
                                  (field_imm 17 (global Dune__exe__Lr0!))
                                  state/859 (field_imm 0 node/928))
                                (== shadow/858 (field_imm 2 node/928))))
                            similar/861))
                        (let
                          (node/929 =
                             (makeblock 0 state/859 ancestor/857 shadow/858))
                          (seq
                            (array.set[addr] map/776 k/860
                              (makeblock 0 node/929 similar/861))
                            (apply (field_imm 2 (global Stdlib__Queue!))
                              node/929 queue/754)
                            (if (== shadow/858 (field_imm 1 X/497))
                              (let
                                (can_reduce/930 =
                                   (makemutable 0
                                     (field_imm 0
                                       (field_imm 3
                                         (global Dune__exe__Grammar!))))
                                 reductions1/998 =
                                   (apply
                                     (field_imm 20 (global Dune__exe__Lr1!))
                                     shadow/858))
                                (apply (field_imm 17 (global Stdlib__List!))
                                  (function (param/3813, param/3814) : int
                                    (let
                                      (prod/1033 =a param/3814
                                       toks/1032 =a param/3813)
                                      (apply
                                        (field_imm 12
                                          (field_imm 3
                                            (global Dune__exe__Grammar!)))
                                        (function tok/1034 : int
                                          (if
                                            (apply
                                              (field_imm 36
                                                (global Stdlib__List!))
                                              prod/1033
                                              (apply
                                                (field_imm 1
                                                  (field_imm 4
                                                    (global Dune__exe__Grammar!)))
                                                tok/1034 reductions1/998))
                                            (try
                                              (seq
                                                (apply
                                                  (field_imm 16
                                                    (field_imm 7
                                                      (global Dune__exe__Grammar!)))
                                                  (makeblock 1 tok/1034)
                                                  (apply
                                                    (field_imm 19
                                                      (global Dune__exe__Lr1!))
                                                    shadow/858))
                                                (raise
                                                  (makeblock 0 Goal/825
                                                    node/929 tok/1034)))
                                             with exn/3815
                                              (catch
                                                (if
                                                  (== exn/3815
                                                    (field_imm 7
                                                      (global Stdlib!)))
                                                  (let
                                                    (toks/1161 =
                                                       (field_mut 0
                                                         can_reduce/930)
                                                     toks'/1162 =
                                                       (apply
                                                         (field_imm 7
                                                           (field_imm 3
                                                             (global Dune__exe__Grammar!)))
                                                         tok/1034 toks/1161))
                                                    (if
                                                      (== toks/1161
                                                        toks'/1162)
                                                      (raise
                                                        (makeblock 0 Goal/825
                                                          node/929 tok/1034))
                                                      (setfield_ptr 0
                                                        can_reduce/930
                                                        toks'/1162)))
                                                  (exit 1))
                                               with (1) (reraise exn/3815)))
                                            0))
                                        toks/1032)))
                                  (apply
                                    (field_imm 16 (global Dune__exe__Lr0!))
                                    state/859)))
                              0)))
                        0))))))
           (catch
             (try
               (seq
                 (apply
                   (field_imm 18 (field_imm 9 (global Dune__exe__Grammar!)))
                   (function prod/1234 k/1235[int] : int
                     (let
                       (shadow/1236 =
                          (try
                            (apply
                              (field_imm 2
                                (field_imm 9 (global Dune__exe__Grammar!)))
                              prod/1234
                              (field_imm 4 (global Dune__exe__Lr1!)))
                           with exn/3821
                            (catch
                              (if
                                (== exn/3821 (field_imm 7 (global Stdlib!)))
                                (raise
                                  (makeblock 0 (global Assert_failure/28!)
                                    [0: "src/lr1partial.ml" 187 12]))
                                (exit 7))
                             with (7) (reraise exn/3821))))
                       (if (apply relevant/498 shadow/1236)
                         (apply explore/855 0 shadow/1236
                           (apply restrict/608
                             (apply (field_imm 12 (global Dune__exe__Lr0!))
                               k/1235)))
                         0)))
                   (field_imm 1 (global Dune__exe__Lr0!)))
                 (apply (field_imm 18 (global Dune__exe__Misc!))
                   (function node/1307 : int
                     (apply
                       (field_imm 22
                         (field_imm 7 (global Dune__exe__Grammar!)))
                       (function symbol/1308 state/1309 : int
                         (try
                           (let
                             (shadow/1310 =
                                (apply
                                  (field_imm 16
                                    (field_imm 7
                                      (global Dune__exe__Grammar!)))
                                  symbol/1308
                                  (apply
                                    (field_imm 19 (global Dune__exe__Lr1!))
                                    (field_imm 2 node/1307))))
                             (if (apply relevant/498 shadow/1310)
                               (apply explore/855
                                 (makeblock 0
                                   (makeblock 0 symbol/1308 node/1307))
                                 shadow/1310 (apply restrict/608 state/1309))
                               0))
                          with exn/3820
                           (catch
                             (if (== exn/3820 (field_imm 7 (global Stdlib!)))
                               0 (exit 6))
                            with (6) (reraise exn/3820))))
                       (apply (field_imm 13 (global Dune__exe__Lr0!))
                         (field_imm 0 node/1307))))
                   queue/754)
                 (raise (field_imm 0 (global Dune__exe__Lr1partial!))))
              with exn/3818
               (catch
                 (let (tag/3819 =a (field_imm 0 exn/3818))
                   (if (== tag/3819 Goal/825)
                     (let
                       (tok/1312 =a (field_imm 2 exn/3818)
                        node/1311 =a (field_imm 1 exn/3818)
                        token/3829 =a tok/1312
                        goal/3828 =a node/1311)
                       (exit 11 goal/3828 token/3829))
                     (exit 5)))
                with (5) (reraise exn/3818)))
            with (11 goal/1164 token/1165)
             (let
               (*match*/3827 =
                  (letrec
                    (follow/1315
                       (function path/1316 node/1317
                         (let (*match*/3822 = (field_imm 1 node/1317))
                           (if (isint *match*/3822)
                             (makeblock 0
                               (apply (field_imm 12 (global Dune__exe__Lr1!))
                                 (field_imm 2 node/1317))
                               (apply (field_imm 9 (global Stdlib__Array!))
                                 path/1316))
                             (let
                               (*match*/3823 =a (field_imm 0 *match*/3822)
                                node/1319 =a (field_imm 1 *match*/3823)
                                symbol/1318 =a (field_imm 0 *match*/3823))
                               (apply follow/1315
                                 (makeblock 0 symbol/1318 path/1316)
                                 node/1319))))))
                    (apply follow/1315 0 goal/1164))
                path/1314 =a (field_imm 1 *match*/3827)
                source/1313 =a (field_imm 0 *match*/3827)
                goal/1349 =
                  (apply (field_imm 9 (global Dune__exe__Lr0!))
                    (field_imm 0 goal/1164)))
               (makeblock 0 relevant/498 restrict/608 queue/754 map/776
                 Goal/825 explore/855 token/1165 source/1313 path/1314
                 goal/1349))))))
    (seq
      (setfield_ptr(root-init) 1 (global Dune__exe__Lr1partial!)
        (function funarg/3834 is_a_functor stub
          (let (let/3835 = (apply Run/1416 funarg/3834))
            (makeblock 0 (field_mut 7 let/3835) (field_mut 8 let/3835)
              (field_mut 9 let/3835) (field_mut 6 let/3835)))))
      0)))
(seq
  (let
    (Oops/414 =
       (makeblock 248 "Dune__exe__Lr1partial.Oops" (caml_fresh_oo_id 0)))
    (setfield_ptr(root-init) 0 (global Dune__exe__Lr1partial!) Oops/414))
  (let
    (Run/1416 =
       (function X/3833 is_a_functor
         (let
           (relevant/498 =
              (let
                (G/549 =
                   (let
                     (foreach_root/546 =
                        (function f/548 (apply f/548 (field_imm 1 X/3833))))
                     (makeblock 0
                       (field_mut 0
                         (let
                           (let/3808 =
                              (field_imm 18 (global Dune__exe__Lr1!)))
                           (field_imm 18 (global Dune__exe__Lr1!))))
                       foreach_root/546))
                 M/580 =
                   (apply
                     (let (let/3811 = (field_imm 2 (global Dune__exe__DFS!)))
                       (field_imm 2 (global Dune__exe__DFS!)))
                     (let
                       (let/3809 = (global Dune__exe__Lr1!)
                        let/3810 =a (global Dune__exe__Lr1!))
                       (makeblock 0 (field_mut 8 let/3810)
                         (field_mut 9 let/3810))))
                 D/589 =
                   (let
                     (discover/581 = (function _node/583 : int 0)
                      traverse/584 =
                        (function _source/586 _label/587 _target/588 : int 0))
                     (makeblock 0 discover/581 traverse/584))
                 R/607 =
                   (apply
                     (apply
                       (apply
                         (let
                           (let/3812 = (field_imm 0 (global Dune__exe__DFS!)))
                           (field_imm 0 (global Dune__exe__DFS!)))
                         G/549)
                       (makeblock 0 (field_mut 0 M/580) (field_mut 1 M/580)))
                     D/589))
                (field_imm 1 M/580))
            restrict/608 =
              (apply (field_imm 23 (global Dune__exe__Lr0!))
                (field_imm 0 X/3833))
            queue/754 = (apply (field_imm 1 (global Stdlib__Queue!)) 0)
            map/776 =
              (caml_make_vect (field_imm 0 (global Dune__exe__Lr0!)) 0)
            Goal/825 =
              (makeblock 248 "Dune__exe__Lr1partial.Run(X).Goal"
                (caml_fresh_oo_id 0))
            explore/855 =
              (function ancestor/857 shadow/858 state/859 : int
                (let
                  (k/860 =[int]
                     (apply (field_imm 11 (global Dune__exe__Lr0!))
                       state/859))
                  (seq
                    (if (< k/860 (field_imm 0 (global Dune__exe__Lr0!))) 0
                      (raise
                        (makeblock 0 (global Assert_failure/28!)
                          [0: "src/lr1partial.ml" 101 4])))
                    (let (similar/861 = (array.get[addr] map/776 k/860))
                      (if
                        (not
                          (apply (field_imm 33 (global Stdlib__List!))
                            (function node/928 : int
                              (&&
                                (apply
                                  (field_imm 17 (global Dune__exe__Lr0!))
                                  state/859 (field_imm 0 node/928))
                                (== shadow/858 (field_imm 2 node/928))))
                            similar/861))
                        (let
                          (node/929 =
                             (makeblock 0 state/859 ancestor/857 shadow/858))
                          (seq
                            (array.set[addr] map/776 k/860
                              (makeblock 0 node/929 similar/861))
                            (apply (field_imm 2 (global Stdlib__Queue!))
                              node/929 queue/754)
                            (if (== shadow/858 (field_imm 1 X/3833))
                              (let
                                (can_reduce/930 =
                                   (makemutable 0
                                     (field_imm 0
                                       (field_imm 3
                                         (global Dune__exe__Grammar!))))
                                 reductions1/998 =
                                   (apply
                                     (field_imm 20 (global Dune__exe__Lr1!))
                                     shadow/858))
                                (apply (field_imm 17 (global Stdlib__List!))
                                  (function (param/3813, param/3814) : int
                                    (apply
                                      (field_imm 12
                                        (field_imm 3
                                          (global Dune__exe__Grammar!)))
                                      (function tok/1034 : int
                                        (if
                                          (apply
                                            (field_imm 36
                                              (global Stdlib__List!))
                                            param/3814
                                            (apply
                                              (field_imm 1
                                                (field_imm 4
                                                  (global Dune__exe__Grammar!)))
                                              tok/1034 reductions1/998))
                                          (try
                                            (seq
                                              (apply
                                                (field_imm 16
                                                  (field_imm 7
                                                    (global Dune__exe__Grammar!)))
                                                (makeblock 1 tok/1034)
                                                (apply
                                                  (field_imm 19
                                                    (global Dune__exe__Lr1!))
                                                  shadow/858))
                                              (raise
                                                (makeblock 0 Goal/825
                                                  node/929 tok/1034)))
                                           with exn/3815
                                            (if
                                              (== exn/3815
                                                (field_imm 7
                                                  (global Stdlib!)))
                                              (let
                                                (toks/1161 =
                                                   (field_mut 0
                                                     can_reduce/930)
                                                 toks'/1162 =
                                                   (apply
                                                     (field_imm 7
                                                       (field_imm 3
                                                         (global Dune__exe__Grammar!)))
                                                     tok/1034 toks/1161))
                                                (if (== toks/1161 toks'/1162)
                                                  (raise
                                                    (makeblock 0 Goal/825
                                                      node/929 tok/1034))
                                                  (setfield_ptr 0
                                                    can_reduce/930
                                                    toks'/1162)))
                                              (reraise exn/3815)))
                                          0))
                                      param/3813))
                                  (apply
                                    (field_imm 16 (global Dune__exe__Lr0!))
                                    state/859)))
                              0)))
                        0))))))
           (try
             (seq
               (apply
                 (field_imm 18 (field_imm 9 (global Dune__exe__Grammar!)))
                 (function prod/1234 k/1235[int] : int
                   (let
                     (shadow/1236 =
                        (try
                          (apply
                            (field_imm 2
                              (field_imm 9 (global Dune__exe__Grammar!)))
                            prod/1234 (field_imm 4 (global Dune__exe__Lr1!)))
                         with exn/3821
                          (if (== exn/3821 (field_imm 7 (global Stdlib!)))
                            (raise
                              (makeblock 0 (global Assert_failure/28!)
                                [0: "src/lr1partial.ml" 187 12]))
                            (reraise exn/3821))))
                     (if (apply relevant/498 shadow/1236)
                       (apply explore/855 0 shadow/1236
                         (apply restrict/608
                           (apply (field_imm 12 (global Dune__exe__Lr0!))
                             k/1235)))
                       0)))
                 (field_imm 1 (global Dune__exe__Lr0!)))
               (apply (field_imm 18 (global Dune__exe__Misc!))
                 (function node/1307 : int
                   (apply
                     (field_imm 22
                       (field_imm 7 (global Dune__exe__Grammar!)))
                     (function symbol/1308 state/1309 : int
                       (try
                         (let
                           (shadow/1310 =
                              (apply
                                (field_imm 16
                                  (field_imm 7 (global Dune__exe__Grammar!)))
                                symbol/1308
                                (apply
                                  (field_imm 19 (global Dune__exe__Lr1!))
                                  (field_imm 2 node/1307))))
                           (if (apply relevant/498 shadow/1310)
                             (apply explore/855
                               (makeblock 0
                                 (makeblock 0 symbol/1308 node/1307))
                               shadow/1310 (apply restrict/608 state/1309))
                             0))
                        with exn/3820
                         (if (== exn/3820 (field_imm 7 (global Stdlib!))) 0
                           (reraise exn/3820))))
                     (apply (field_imm 13 (global Dune__exe__Lr0!))
                       (field_imm 0 node/1307))))
                 queue/754)
               (raise (field_imm 0 (global Dune__exe__Lr1partial!))))
            with exn/3818
             (if (== (field_imm 0 exn/3818) Goal/825)
               (let
                 (node/1311 =a (field_imm 1 exn/3818)
                  *match*/3827 =
                    (letrec
                      (follow/1315
                         (function path/1316 node/1317
                           (let (*match*/3822 = (field_imm 1 node/1317))
                             (if (isint *match*/3822)
                               (makeblock 0
                                 (apply
                                   (field_imm 12 (global Dune__exe__Lr1!))
                                   (field_imm 2 node/1317))
                                 (apply (field_imm 9 (global Stdlib__Array!))
                                   path/1316))
                               (let
                                 (*match*/3823 =a (field_imm 0 *match*/3822))
                                 (apply follow/1315
                                   (makeblock 0 (field_imm 0 *match*/3823)
                                     path/1316)
                                   (field_imm 1 *match*/3823)))))))
                      (apply follow/1315 0 node/1311))
                  goal/1349 =
                    (apply (field_imm 9 (global Dune__exe__Lr0!))
                      (field_imm 0 node/1311)))
                 (makeblock 0 relevant/498 restrict/608 queue/754 map/776
                   Goal/825 explore/855 (field_imm 2 exn/3818)
                   (field_imm 0 *match*/3827) (field_imm 1 *match*/3827)
                   goal/1349))
               (reraise exn/3818))))))
    (seq
      (setfield_ptr(root-init) 1 (global Dune__exe__Lr1partial!)
        (function funarg/3834 is_a_functor stub
          (let (let/3835 = (apply Run/1416 funarg/3834))
            (makeblock 0 (field_mut 7 let/3835) (field_mut 8 let/3835)
              (field_mut 9 let/3835) (field_mut 6 let/3835)))))
      0)))
