type 'a t
val create : unit -> 'a t
val pop : ?picky:('a -> bool) -> ?destroy:bool ref -> 'a t -> 'a
val push : 'a t -> 'a -> unit
val set_order : 'a t -> ('a -> 'a -> int) -> unit
val wait_until_n_are_waiting_and_queue_empty : int -> 'a t -> unit
val broadcast : 'a t -> unit
val wait_until_n_are_waiting_then_snapshot : int -> 'a t -> 'a list
val clear : 'a t -> unit
val clear_saving : 'a t -> ('a -> 'b option) -> 'b list
val is_empty : 'a t -> bool
exception BeingDestroyed
val destroy : 'a t -> unit("DEBUG:rule", [Tag1 (("t", 283), ([((("a")), 100000000, 0, -70)], 1, 0, 1, 0, [7], [2], 0, 0, (("stm/tQueue.mli", 13, 718, 718), ("stm/tQueue.mli", 13, 718, 727), 0), 0, 0, 0, Tag1 ("TQueue", 0)), 1, 0); (("create", 284), ((Tag1 (0, (Tag3 ((Tag3 ("unit", 6)), 0, (0)), 100000000, 0, -69), (Tag3 ((("t", 283)), [((("a")), 100000000, 0, -68)], (0)), 100000000, 0, -67), 0), 100000000, 0, -66), 0, (("stm/tQueue.mli", 14, 728, 728), ("stm/tQueue.mli", 14, 728, 753), 0), 0, Tag1 ("TQueue", 1)), 0); (("pop", 285), ((Tag1 (Tag1 ("picky"), (Tag3 ((Tag3 ("option", 10)), [(Tag1 (0, ((("a")), 100000000, 0, -58), (Tag3 ((Tag3 ("bool", 5)), 0, (0)), 100000000, 0, -65), 0), 100000000, 0, -64)], (0)), 100000000, 0, -63), (Tag1 (Tag1 ("destroy"), (Tag3 ((Tag3 ("option", 10)), [(Tag3 (Tag1 ((Tag2 ("Stdlib")), "ref"), [(Tag3 ((Tag3 ("bool", 5)), 0, (0)), 100000000, 0, -62)], (0)), 100000000, 0, -61)], (0)), 100000000, 0, -60), (Tag1 (0, (Tag3 ((("t", 283)), [((("a")), 100000000, 0, -58)], (0)), 100000000, 0, -59), ((("a")), 100000000, 0, -58), 0), 100000000, 0, -57), 0), 100000000, 0, -56), 0), 100000000, 0, -55), 0, (("stm/tQueue.mli", 15, 754, 754), ("stm/tQueue.mli", 15, 754, 818), 0), 0, Tag1 ("TQueue", 2)), 0); (("push", 286), ((Tag1 (0, (Tag3 ((("t", 283)), [((("a")), 100000000, 0, -53)], (0)), 100000000, 0, -54), (Tag1 (0, ((("a")), 100000000, 0, -53), (Tag3 ((Tag3 ("unit", 6)), 0, (0)), 100000000, 0, -52), 0), 100000000, 0, -51), 0), 100000000, 0, -50), 0, (("stm/tQueue.mli", 16, 819, 819), ("stm/tQueue.mli", 16, 819, 848), 0), 0, Tag1 ("TQueue", 3)), 0); (("set_order", 287), ((Tag1 (0, (Tag3 ((("t", 283)), [((("a")), 100000000, 0, -48)], (0)), 100000000, 0, -49), (Tag1 (0, (Tag1 (0, ((("a")), 100000000, 0, -48), (Tag1 (0, ((("a")), 100000000, 0, -48), (Tag3 ((Tag3 ("int", 1)), 0, (0)), 100000000, 0, -47), 0), 100000000, 0, -46), 0), 100000000, 0, -45), (Tag3 ((Tag3 ("unit", 6)), 0, (0)), 100000000, 0, -44), 0), 100000000, 0, -43), 0), 100000000, 0, -42), 0, (("stm/tQueue.mli", 17, 849, 849), ("stm/tQueue.mli", 17, 849, 898), 0), 0, Tag1 ("TQueue", 4)), 0); (("wait_until_n_are_waiting_and_queue_empty", 288), ((Tag1 (0, (Tag3 ((Tag3 ("int", 1)), 0, (0)), 100000000, 0, -41), (Tag1 (0, (Tag3 ((("t", 283)), [((("a")), 100000000, 0, -40)], (0)), 100000000, 0, -39), (Tag3 ((Tag3 ("unit", 6)), 0, (0)), 100000000, 0, -38), 0), 100000000, 0, -37), 0), 100000000, 0, -36), 0, (("stm/tQueue.mli", 18, 899, 899), ("stm/tQueue.mli", 18, 899, 965), 0), 0, Tag1 ("TQueue", 5)), 0); (("broadcast", 289), ((Tag1 (0, (Tag3 ((("t", 283)), [((("a")), 100000000, 0, -35)], (0)), 100000000, 0, -34), (Tag3 ((Tag3 ("unit", 6)), 0, (0)), 100000000, 0, -33), 0), 100000000, 0, -32), 0, (("stm/tQueue.mli", 21, 1001, 1001), ("stm/tQueue.mli", 21, 1001, 1029), 0), 0, Tag1 ("TQueue", 6)), 0); (("wait_until_n_are_waiting_then_snapshot", 290), ((Tag1 (0, (Tag3 ((Tag3 ("int", 1)), 0, (0)), 100000000, 0, -31), (Tag1 (0, (Tag3 ((("t", 283)), [((("a")), 100000000, 0, -29)], (0)), 100000000, 0, -30), (Tag3 ((Tag3 ("list", 9)), [((("a")), 100000000, 0, -29)], (0)), 100000000, 0, -28), 0), 100000000, 0, -27), 0), 100000000, 0, -26), 0, (("stm/tQueue.mli", 24, 1053, 1053), ("stm/tQueue.mli", 24, 1053, 1120), 0), 0, Tag1 ("TQueue", 7)), 0); (("clear", 291), ((Tag1 (0, (Tag3 ((("t", 283)), [((("a")), 100000000, 0, -25)], (0)), 100000000, 0, -24), (Tag3 ((Tag3 ("unit", 6)), 0, (0)), 100000000, 0, -23), 0), 100000000, 0, -22), 0, (("stm/tQueue.mli", 26, 1122, 1122), ("stm/tQueue.mli", 26, 1122, 1146), 0), 0, Tag1 ("TQueue", 8)), 0); (("clear_saving", 292), ((Tag1 (0, (Tag3 ((("t", 283)), [((("a")), 100000000, 0, -20)], (0)), 100000000, 0, -21), (Tag1 (0, (Tag1 (0, ((("a")), 100000000, 0, -20), (Tag3 ((Tag3 ("option", 10)), [((("b")), 100000000, 0, -17)], (0)), 100000000, 0, -19), 0), 100000000, 0, -18), (Tag3 ((Tag3 ("list", 9)), [((("b")), 100000000, 0, -17)], (0)), 100000000, 0, -16), 0), 100000000, 0, -15), 0), 100000000, 0, -14), 0, (("stm/tQueue.mli", 27, 1147, 1147), ("stm/tQueue.mli", 27, 1147, 1202), 0), 0, Tag1 ("TQueue", 9)), 0); (("is_empty", 293), ((Tag1 (0, (Tag3 ((("t", 283)), [((("a")), 100000000, 0, -13)], (0)), 100000000, 0, -12), (Tag3 ((Tag3 ("bool", 5)), 0, (0)), 100000000, 0, -11), 0), 100000000, 0, -10), 0, (("stm/tQueue.mli", 28, 1203, 1203), ("stm/tQueue.mli", 28, 1203, 1230), 0), 0, Tag1 ("TQueue", 10)), 0); Tag2 (("BeingDestroyed", 294), ((Tag3 ("exn", 7)), 0, (0), 0, 1, (("_none_", 0, 0, -1), ("_none_", 0, 0, -1), 1), 0, Tag1 ("TQueue", 11)), 2, 0); (("destroy", 295), ((Tag1 (0, (Tag3 ((("t", 283)), [((("a")), 100000000, 0, -9)], (0)), 100000000, 0, -8), (Tag3 ((Tag3 ("unit", 6)), 0, (0)), 100000000, 0, -7), 0), 100000000, 0, -6), 0, (("stm/tQueue.mli", 33, 1344, 1344), ("stm/tQueue.mli", 33, 1344, 1370), 0), 0, Tag1 ("TQueue", 12)), 0); (("length", 296), ((Tag1 (0, (Tag3 ((("t", 283)), [((("a")), 100000000, 0, -5)], (0)), 100000000, 0, -4), (Tag3 ((Tag3 ("int", 1)), 0, (0)), 100000000, 0, -3), 0), 100000000, 0, -2), 0, (("stm/tQueue.mli", 35, 1372, 1372), ("stm/tQueue.mli", 35, 1372, 1396), 0), 0, Tag1 ("TQueue", 13)), 0)], "TQueue", [("TQueue", ("\186j\147ow=\178v\208o\246\137\219ta\254")); ("Stdlib", ("\011EI\"\139\201\184\193\207\161\232\136\215C+\223")); ("CamlinternalFormatBasics", ("!%\242k\131\017S\201*D\240k\253\229p\174"))], [(0)])

val length : 'a t -> int
